!function(){"use strict";var n={n:function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},d:function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},de=React,me=n.n(de),t=ReactDOM,pe=CoreUtilities,e=PropTypes,i=n.n(e),s=ReactUtilities,P=ReactStyleGuide,o={purchasingResources:{common:[],feature:"Purchasing.PurchaseDialog"},itemResources:{common:[],feature:"Feature.Item"},itemModelResources:{common:[],feature:"Feature.ItemModel"}},a={errorTypeIds:{transactionFailure:"TransactionFailureView",insufficientFunds:"InsufficientFundsView",priceChanged:"PriceChangedView"},errorStatusText:{badRequest:"Bad Request"},events:{startItemPurchase:"ItemPurchaseStart",NEW_UPSELL_FAILED_DUE_TO_ERROR:"ReactBuyButtonNewUpsellProcessFailedDueToError",NEW_UPSELL_FAILED_DUE_TO_LOADING:"ReactBuyButtonNewUpsellProcessFailedDueToNotLoaded",NEW_UPSELL_FROM_REACT_BUY_BUTTON:"ReactBuyButtonNewUpsellProcessNewUpsellFromReactBuyButton"},resources:{freeLabel:"Label.Free",okAction:"Action.Ok",insufficientFundsHeading:"Heading.InsufficientFunds",insufficientFundsMessage:"Message.InsufficientFunds",doneAction:"Action.Done",cancelAction:"Action.Cancel",buyRobuxAction:"Action.BuyRobux",buyAccessAction:"Action.BuyAccess",buyItemHeading:"Heading.BuyItem",buyNowAction:"Action.BuyNow",getItemHeading:"Heading.GetItem",getNowAction:"Action.GetNow",priceChangedHeading:"Heading.PriceChanged",priceChangedMessage:"Message.PriceChanged",balanceAfterMessage:"Message.BalanceAfter",agreeAndPayLabel:"Label.AgreeAndPay",promptGetFreeAccessMessage:"Message.PromptGetFreeAccess",promptGetFreeMessage:"Message.PromptGetFree",promptBuyAccessMessage:"Message.PromptBuyAccess",promptBuyMessage:"Message.PromptBuy",configureAction:"Action.Customize",notNowAction:"Action.NotNow",customizeAction:"Action.Customize",continueAction:"Action.Continue",purchaseCompleteHeading:"Heading.PurchaseComplete",successfullyBoughtAccessMessage:"Message.SuccessfullyBoughtAccess",successfullyBoughtMessage:"Message.SuccessfullyBought",successfullyRenewedAccessMessage:"Message.SuccessfullyRenewedAccess",successfullyRenewedMessage:"Message.SuccessfullyRenewed",successfullyAcquiredAccessMessage:"Message.SuccessfullyAcquiredAccess",successfullyAcquiredMessage:"Message.SuccessfullyAcquired",itemGrantDelayMessage:"Message.ItemGrantDelay",errorOccuredHeading:"Heading.ErrorOccured",purchasingUnavailableMessage:"Message.PurchasingUnavailable",buyAction:"Action.Buy",installAction:"Action.Install",getAction:"Action.Get",bestPriceLabel:"Label.BestPrice",priceLabel:"Label.Price",premiumDiscountOpportunityPromptLabel:"Label.PremiumDiscountOpportunityPrompt",premiumDiscountSavingsLabel:"Label.PremiumDiscountSavings",premiumExclusiveEligiblePromptLabel:"Label.PremiumExclusiveEligiblePrompt",premiumExclusiveIneligiblePromptLabel:"Label.PremiumExclusiveIneligiblePrompt",getPremiumAction:"Action.GetPremium",itemNotCurrentlyForSaleLabel:"Label.ItemNotCurrentlyForSale",itemNoLongerForSaleLabel:"Label.ItemNoLongerForSale",purchasingTemporarilyUnavailableLabel:"Label.PurchasingTemporarilyUnavailable",itemAvailableInventoryLabel:"Label.ItemAvailableInventory",noOneCurrentlySellingLabel:"Label.NoOneCurrentlySelling",inventoryAction:"Action.Inventory",OffsaleCountdownHourMinuteSecondLabel:"Label.OffsaleCountdownHourMinuteSecond",CountdownTimerDayHourMinute:"Label.CountdownTimerDayHourMinute",batchBuyItemHeading:"Heading.BuyItems",batchBuyPromptMessage:"Message.PromptBatchBuy",batchBuyBalanceAfterMessage:"Message.BalanceAfter",purchaseCompletedMessage:"Heading.PurchaseCompleted",generalPurchaseErrorMessage:"Heading.GeneralError",batchBuyPartialSuccessGeneralFailureMessage:"Heading.PartialSuccessGeneralFailure",batchBuyPartialSuccessItemsOwnedFailureMessage:"Heading.PartialSuccessItemsOwnedFailure",batchBuyPartialSuccessInsufficientFundsFailureMessage:"Heading.PartialSuccessInsufficientFundsFailure",batchBuyPartialSuccessNetworkErrorFailureMessage:"Heading.PartialSuccessNetworkErrorFailure",batchBuyPartialSuccessFloodcheckFailureMessage:"Heading.PartialSuccessFloodcheckFailure",purchaseErrorFailureMessage:"Heading.PurchaseFailure",batchBuyItemsOwnedFailureMessage:"Heading.ItemsOwnedFailure",insufficientFundsFailureMessage:"Heading.InsufficientFundsFailure",networkErrroFailureMessage:"Heading.NetworkErrorFailure",floodcheckFailureMessage:"Heading.FloodcheckFailure",batchBuyPartialSuccessPremiumNeededFailureMessage:"Heading.PartialSuccessPremiumNeededFailure",batchBuyPartialSuccessNoSellersFailureMessage:"Heading.PartialSuccessNoSellersFailure",premiumNeededFailureMessage:"Heading.PremiumNeededFailure",noSellersFailureMessage:"Heading.NoSellersFailure"},assetTypes:{Plugin:38,Decal:13,Model:10,Video:62,MeshPart:40,Place:9,Badge:21,GamePass:34,Animation:24},assetCategory:{Catalog:0,Library:1},errorMessages:{insufficientFunds:"InsufficientFunds",retryErrorMessage:"Failed to determine purchasability status. Please try again by refreshing.",notForSale:"NotForSale",unauthorizedMessage:"Unauthorized",twoStepVerificationRequired:"TwoStepVerificationRequired"},batchBuyMaxThumbnails:3,maxBatchLoadRetries:5,floodcheckTime:5};function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c=a.resources;function u(){var e=r((0,P.createModal)(),2),a=e[0],e=e[1];function t(e){var t=e.translate,r=e.title,n=e.message,e=e.onDecline,n=me().createElement("div",{className:"modal-message"},n);return me().createElement(a,{title:r,body:n,thumbnail:me().createElement("span",{className:"icon-warning-orange-150x150"}),neutralButtonText:t(c.okAction),onNeutral:e})}return t.defaultProps={onDecline:null},t.propTypes={translate:i().func.isRequired,title:i().string.isRequired,message:i().string.isRequired,onDecline:i().func},[(0,s.withTranslations)(t,o.purchasingResources),e]}var A=ReactDOMServer,I=CoreRobloxUtilities,fe=Roblox,d=fe.EnvironmentUrls.economyApi,m=fe.EnvironmentUrls.catalogApi,p=fe.EnvironmentUrls.apiGatewayUrl,f=fe.EnvironmentUrls.twoStepVerificationApi,b={getRobuxUpgradesUrl:function(e){return pe.urlService.getUrlWithQueries("/Upgrades/Robux.aspx",{ctx:e})},getAvatarPageUrl:function(){return pe.urlService.getAbsoluteUrl("/my/avatar")},getPurchaseItemUrl:function(e){return d+"/v1/purchases/products/"+e},getItemDetailsUrl:function(e,t){return m+"/v1/catalog/items/"+e+"/details?itemType="+t},postItemDetailsUrl:function(){return m+"/v1/catalog/items/details"},getPurchaseableDetailUrl:function(e){return d+"/v1/products/"+e+"?showPurchasable=true"},getPremiumConversionUrl:function(e,t){return"/premium/membership?ctx=WebItemDetail&upsellTargetType="+t+"&upsellTargetId="+e},getResellerDataUrl:function(e){return d+"/v1/assets/"+e+"/resellers?limit=10"},getInventoryUrl:function(e){return"/users/"+e+"/inventory"},getMetaDataUrl:function(){return d+"/v2/metadata"},getCurrentUserBalance:function(e){return d+"/v1/users/"+e+"/currency"},getPurchaseCollectibleItemUrl:function(e){return p+"/marketplace-sales/v1/item/"+e+"/purchase-item"},getPurchaseCollectibleItemInstanceUrl:function(e){return p+"/marketplace-sales/v1/item/"+e+"/purchase-resale"},getCollectibleItemDetailsUrl:function(){return p+"/marketplace-items/v1/items/details"},getTwoStepVerificationConfig:function(e){return f+"/v1/users/"+e+"/configuration"},postGenerateTwoStepVerificationToken:function(e){return d+"/v2/"+e+"/two-step-verification/generate"},postRedeemTwoStepVerificationChallenge:function(e){return d+"/v2/"+e+"/two-step-verification/redeem"}},y=a.resources;function g(e){var t=e.translate,r=e.price,n=e.color,e=e.useFreeText;return 0===r&&e?me().createElement("span",{className:"text-robux text-free"},t(y.freeLabel)):me().createElement(me().Fragment,null,me().createElement("span",{className:"icon-robux".concat(n?"-".concat(n):"","-16x16")}),me().createElement("span",{className:"text-robux"},pe.numberFormat.getNumberFormat(r)))}g.defaultProps={color:"",useFreeText:!0},g.propTypes={price:i().number.isRequired,translate:i().func.isRequired,color:i().string,useFreeText:i().bool};var T=(0,s.withTranslations)(g,o.purchasingResources);function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var w=a.resources;function E(){var e=v((0,P.createModal)(),2),a=e[0],e=e[1];function t(e){var t=e.translate,r=e.robuxNeeded,n=e.source,r=me().createElement("div",{className:"modal-message",dangerouslySetInnerHTML:{__html:t(w.insufficientFundsMessage,{robux:(0,A.renderToString)(me().createElement(T,{price:r}))})}});return me().createElement(a,h({title:t(w.insufficientFundsHeading),body:r,thumbnail:me().createElement("span",{className:"money-stack-icon"}),neutralButtonText:t(w.cancelAction),actionButtonText:t(w.buyRobuxAction),onAction:function(){return I.paymentFlowAnalyticsService.sendUserPurchaseFlowEvent(I.paymentFlowAnalyticsService.ENUM_TRIGGERING_CONTEXT.WEB_CATALOG_ROBUX_UPSELL,!0,I.paymentFlowAnalyticsService.ENUM_VIEW_NAME.ROBUX_UPSELL,I.paymentFlowAnalyticsService.ENUM_PURCHASE_EVENT_TYPE.USER_INPUT,I.paymentFlowAnalyticsService.ENUM_VIEW_MESSAGE.BUY_ROBUX),window.location=b.getRobuxUpgradesUrl(n),!1},onClose:function(){I.paymentFlowAnalyticsService.sendUserPurchaseFlowEvent(I.paymentFlowAnalyticsService.ENUM_TRIGGERING_CONTEXT.WEB_CATALOG_ROBUX_UPSELL,!0,I.paymentFlowAnalyticsService.ENUM_VIEW_NAME.ROBUX_UPSELL,I.paymentFlowAnalyticsService.ENUM_PURCHASE_EVENT_TYPE.USER_INPUT,I.paymentFlowAnalyticsService.ENUM_VIEW_MESSAGE.CANCEL)}},{actionButtonShow:!0}))}return t.defaultProps={onAccept:null,source:""},t.propTypes={translate:i().func.isRequired,source:i().string,onAccept:i().func,robuxNeeded:i().number.isRequired},[(0,s.withTranslations)(t,o.purchasingResources),e]}function be(){var e=document.getElementById("ItemPurchaseAjaxData");return e?{userRobuxBalance:parseInt(e.getAttribute("data-user-balance-robux"),10),userBc:parseInt(e.getAttribute("data-user-bc"),10),hasCurrencyServiceError:"True"===e.getAttribute("data-has-currency-service-error"),currencyServiceErrorMessage:e.getAttribute("data-currency-service-error-message")}:{}}var R=a.resources;function x(e){var t=e.translate,r=e.expectedPrice,e=e.currentRobuxBalance,r=(null!=e?e:be().userRobuxBalance)-r;return me().createElement("span",{dangerouslySetInnerHTML:{__html:t(R.balanceAfterMessage,{robuxBalance:(0,A.renderToString)(me().createElement(T,{price:r,color:"gray",useFreeText:!1}))})}})}x.propTypes={expectedPrice:i().number.isRequired,currentRobuxBalance:i().number,translate:i().func.isRequired},x.defaultProps={currentRobuxBalance:void 0};var C=(0,s.withTranslations)(x,o.purchasingResources);function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var D=a.resources;function B(){var e=F((0,P.createModal)(),2),l=e[0],e=e[1];function t(e){var t=e.translate,r=e.expectedPrice,n=e.currentPrice,a=e.onAction,i=e.loading,e=F((0,de.useState)(!1),2),s=e[0],o=e[1],r=me().createElement(me().Fragment,null,me().createElement("div",{className:"modal-message",dangerouslySetInnerHTML:{__html:t(D.priceChangedMessage,{robuxBefore:(0,A.renderToString)(me().createElement(T,{price:r,color:"gray"})),robuxAfter:(0,A.renderToString)(me().createElement(T,{price:n,color:"gray"}))})}}),me().createElement("div",{className:"modal-checkbox checkbox"},me().createElement("input",{id:"modal-checkbox-input",name:"agreementCheckBox",type:"checkbox",checked:s}),me().createElement("label",{onClick:function(){return o(!s)},htmlFor:"modal-checkbox-input"},t(D.agreeAndPayLabel))));return me().createElement(l,M({title:t(D.priceChangedHeading),body:r,neutralButtonText:t(D.cancelAction),actionButtonText:t(D.buyRobuxAction),onAction:a,loading:i,disableActionButton:!s,footerText:me().createElement(C,{expectedPrice:n})},{actionButtonShow:!0}))}return t.defaultProps={loading:!1},t.propTypes={translate:i().func.isRequired,expectedPrice:i().number.isRequired,currentPrice:i().number.isRequired,onAction:i().func.isRequired,loading:i().bool},[(0,s.withTranslations)(t,o.purchasingResources),e]}function O(e){e=e.name;return me().createElement("span",{className:"font-bold"},e)}O.propTypes={name:i().string.isRequired};var U=O;function q(){return(q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var _=a.resources;function j(){var e=L((0,P.createModal)(),2),p=e[0],e=e[1];function t(e){var t,r=e.translate,n=e.title,a=e.expectedPrice,i=e.thumbnail,s=e.assetName,o=e.assetType,l=e.assetTypeDisplayName,c=e.sellerName,u=e.isPlace,d=e.onAction,m=e.loading,e=e.currentRobuxBalance,l={assetName:(0,A.renderToString)(me().createElement(U,{name:s})),assetType:l||o,seller:c,robux:(0,A.renderToString)(me().createElement(T,{price:a}))},o=u?_.promptBuyAccessMessage:_.promptBuyMessage,c=0===a?(t=r(_.getItemHeading),r(_.getNowAction)):(t=r(_.buyItemHeading),r(_.buyNowAction));u&&(c=r(_.buyAccessAction));l=me().createElement("div",{className:"modal-message",dangerouslySetInnerHTML:{__html:r(o,l)}});return me().createElement(p,q({title:n||t,body:l,thumbnail:i,neutralButtonText:r(_.cancelAction),actionButtonText:c,onAction:d,footerText:me().createElement(C,{expectedPrice:a,currentRobuxBalance:e}),loading:m},{actionButtonShow:!0}))}return t.defaultProps={isPlace:!1,assetTypeDisplayName:"",title:"",loading:!1,currentRobuxBalance:void 0},t.propTypes={translate:i().func.isRequired,title:i().string,expectedPrice:i().number.isRequired,thumbnail:i().node.isRequired,assetName:i().string.isRequired,assetType:i().string.isRequired,assetTypeDisplayName:i().string,sellerName:i().string.isRequired,isPlace:i().bool,onAction:i().func.isRequired,loading:i().bool,currentRobuxBalance:i().number},[(0,s.withTranslations)(t,o.purchasingResources),e]}(Tt=Et=Et||{}).Bought="bought",Tt.Renewed="renewed";var H=Et;function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return G(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return G(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var W=b.getAvatarPageUrl,z=a.resources;function ye(){var e=V((0,P.createModal)(),2),h=e[0],e=e[1];function t(e){var t,r,n=e.translate,a=e.expectedPrice,i=e.thumbnail,s=e.assetName,o=e.assetType,l=e.assetIsWearable,c=e.assetTypeDisplayName,u=e.sellerName,d=e.isPlace,m=e.isPrivateServer,p=e.onAccept,f=e.onDecline,b=e.transactionVerb,y=e.itemDelayed,g=e.currentRobuxBalance,e=n(z.continueAction);m?(t=n(z.configureAction),e=n(z.notNowAction)):y?(t=n(z.customizeAction),e=n(z.doneAction)):l&&(t=n(z.customizeAction),e=n(z.notNowAction),r=function(){return window.location.href=W(),!1});u={assetName:(0,A.renderToString)(me().createElement(U,{name:s})),assetType:c||o,seller:u,robux:(0,A.renderToString)(me().createElement(T,{price:a}))},d=b===H.Bought?d?z.successfullyAcquiredAccessMessage:z.successfullyBoughtMessage:b===H.Renewed?d?z.successfullyRenewedAccessMessage:z.successfullyRenewedMessage:d?z.successfullyAcquiredAccessMessage:z.successfullyAcquiredMessage,u=me().createElement("div",{className:"modal-message",dangerouslySetInnerHTML:{__html:"".concat(n(d,u)," ").concat(y?n(z.itemGrantDelayMessage):"")}});return me().createElement(h,{title:n(z.purchaseCompleteHeading),body:u,thumbnail:i,neutralButtonText:e,actionButtonText:t,onAction:p||r,onNeutral:f,footerText:!m&&me().createElement(C,{expectedPrice:a,currentRobuxBalance:g}),actionButtonShow:!!t,disableActionButton:y,onClose:function(){return window.location.reload()}})}return t.defaultProps={isPlace:!1,assetTypeDisplayName:"",transactionVerb:"",assetIsWearable:!1,isPrivateServer:!1,onAccept:null,onDecline:null,itemDelayed:!1,currentRobuxBalance:void 0},t.propTypes={translate:i().func.isRequired,transactionVerb:i().string,expectedPrice:i().number.isRequired,thumbnail:i().node.isRequired,assetName:i().string.isRequired,assetType:i().string.isRequired,assetTypeDisplayName:i().string,assetIsWearable:i().bool,sellerName:i().string.isRequired,isPlace:i().bool,isPrivateServer:i().bool,onAccept:i().func,onDecline:i().func,itemDelayed:i().bool,currentRobuxBalance:i().number},[(0,s.withTranslations)(t,o.purchasingResources),e]}var $=b.getPurchaseItemUrl,X=b.getPurchaseCollectibleItemUrl,Q=b.getPurchaseCollectibleItemInstanceUrl,ge={purchaseCollectibleItem:function(e,t){e={url:X(e),retryable:!0,withCredentials:!0};return pe.httpService.post(e,t)},purchaseCollectibleItemInstance:function(e,t){e={url:Q(e),retryable:!0,withCredentials:!0};return pe.httpService.post(e,t)},purchaseItem:function(e,t){e={url:$(e),retryable:!0,withCredentials:!0};return pe.httpService.post(e,t)}},Y=b.getItemDetailsUrl,J=(b.postItemDetailsUrl,b.getPurchaseableDetailUrl),K=b.getResellerDataUrl,Z=b.getMetaDataUrl,ee=(b.getCollectibleItemDetailsUrl,b.getCurrentUserBalance),te=function(e,t){t={url:Y(e,t),retryable:!0,withCredentials:!0};return pe.httpService.get(t)},re=function(e){e={url:J(e),retryable:!0,withCredentials:!0};return pe.httpService.get(e)},ne=function(e){e={url:K(e),retryable:!0,withCredentials:!0};return pe.httpService.get(e)},ae=function(){var e={url:Z(),retryable:!0,withCredentials:!0};return pe.httpService.get(e)},he=function(e){e={url:ee(e),retryable:!0,withCredentials:!0};return pe.httpService.get(e)},ie=function(e,s,o,l){return new(o=o||Promise)(function(r,t){function n(e){try{i(l.next(e))}catch(e){t(e)}}function a(e){try{i(l.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof o?t:new o(function(e){e(t)})).then(n,a)}i((l=l.apply(e,s||[])).next())})},se=function(r,n){var a,i,s,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;o;)try{if(a=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return o.label++,{value:t[1],done:!1};case 5:o.label++,i=t[1],t=[0];continue;case 7:t=o.ops.pop(),o.trys.pop();continue;default:if(!(s=0<(s=o.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){o=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){o.label=t[1];break}if(6===t[0]&&o.label<s[1]){o.label=s[1],s=t;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(t);break}s[2]&&o.ops.pop(),o.trys.pop();continue}t=n.call(r,o)}catch(e){t=[6,e],i=0}finally{a=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},oe=b.getTwoStepVerificationConfig,le=b.postGenerateTwoStepVerificationToken,ce=b.postRedeemTwoStepVerificationChallenge,ue=function(){return ie(void 0,void 0,Promise,function(){var t;return se(this,function(e){switch(e.label){case 0:t={url:le("spend-friction"),retryable:!0,withCredentials:!0},e.label=1;case 1:return e.trys.push([1,3,,4]),[4,pe.httpService.post(t)];case 2:return[2,e.sent().data||null];case 3:return e.sent(),[2,null];case 4:return[2]}})})},ve=function(n,a){return ie(void 0,void 0,Promise,function(){var t,r;return se(this,function(e){switch(e.label){case 0:t={url:ce("spend-friction"),retryable:!0,withCredentials:!0},r={challengeToken:n,verificationToken:a},e.label=1;case 1:return e.trys.push([1,3,,4]),[4,pe.httpService.post(t,r)];case 2:return r=e.sent(),[2,null!==(r=r.data)&&void 0!==r&&r];case 3:return e.sent(),[2,!1];case 4:return[2]}})})},Se=function(e,s,o,l){return new(o=o||Promise)(function(r,t){function n(e){try{i(l.next(e))}catch(e){t(e)}}function a(e){try{i(l.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof o?t:new o(function(e){e(t)})).then(n,a)}i((l=l.apply(e,s||[])).next())})},Pe=function(r,n){var a,i,s,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;o;)try{if(a=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return o.label++,{value:t[1],done:!1};case 5:o.label++,i=t[1],t=[0];continue;case 7:t=o.ops.pop(),o.trys.pop();continue;default:if(!(s=0<(s=o.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){o=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){o.label=t[1];break}if(6===t[0]&&o.label<s[1]){o.label=s[1],s=t;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(t);break}s[2]&&o.ops.pop(),o.trys.pop();continue}t=n.call(r,o)}catch(e){t=[6,e],i=0}finally{a=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},Ie=fe.AccountIntegrityChallengeService.TwoStepVerification;function we(e){var t=e.systemFeedbackService,e=e.translate;t.warning(e("Response.VerificationError"))}function Ae(e){var s=e.stopTwoStepVerification,o=e.systemFeedbackService,r=e.totalAttempts,l=e.translate;return Se(this,void 0,void 0,function(){var i,t=this;return Pe(this,function(e){switch(e.label){case 0:return[4,ue()];case 1:return(i=e.sent())?fe.AccountIntegrityChallengeService.TwoStepVerification.renderChallenge({containerId:"two-sv-popup-entry",userId:fe.CurrentUser.userId,challengeId:i,actionType:Ie.ActionType.RobuxSpend,renderInline:!1,shouldShowRememberDeviceCheckbox:!1,shouldDynamicallyLoadTranslationResources:!1,onChallengeCompleted:function(a){return Se(t,void 0,void 0,function(){var n;return Pe(this,function(e){switch(e.label){case 0:return[4,ve(i,a.verificationToken)];case 1:return n=e.sent(),s(),n?(r=(t={systemFeedbackService:o,translate:l}).systemFeedbackService,t=t.translate,r.success(t("Response.SuccessfulVerificationV2"))):we({systemFeedbackService:o,translate:l}),[2]}var t,r})})},onChallengeInvalidated:function(){var e=r||0;e<3?Ae({stopTwoStepVerification:s,systemFeedbackService:o,translate:l,totalAttempts:e+1}):(we({systemFeedbackService:o,translate:l}),s())},onModalChallengeAbandoned:function(){}}):we({systemFeedbackService:o,translate:l}),[2]}})})}var Te=(0,s.withTranslations)(function(e){var t=this,r=e.translate,n=e.isTwoStepVerificationActive,a=e.stopTwoStepVerification,i=e.systemFeedbackService;return(0,de.useEffect)(function(){n&&Se(t,void 0,void 0,function(){return Pe(this,function(e){switch(e.label){case 0:return[4,ie(void 0,void 0,Promise,function(){var t;return se(this,function(e){switch(e.label){case 0:t={url:oe(fe.CurrentUser.userId),retryable:!0,withCredentials:!0},e.label=1;case 1:return e.trys.push([1,3,,4]),[4,pe.httpService.get(t)];case 2:return t=e.sent(),[2,((null===(t=null==t?void 0:t.data)||void 0===t?void 0:t.methods)||[]).some(function(e){return!!e.enabled})];case 3:return e.sent(),[2,!1];case 4:return[2]}})})];case 1:return e.sent()?Ae({stopTwoStepVerification:a,systemFeedbackService:i,translate:r}):(t={titleText:(t=(t={translate:r}).translate)("Heading.TwoStepVerificationRequiredV3"),bodyContent:t("Message.TwoStepVerificationRequiredV4"),imageUrl:void 0,acceptText:t("Action.GoToSecurity"),acceptColor:"btn-primary-md",onAccept:function(){window.location.href=fe.Endpoints.getAbsoluteUrl("/my/account#!/security")},declineText:t("Action.Cancel"),dismissable:!0,allowHtmlContentInBody:!0,onOpenCallback:function(){}},fe.Dialog.open(t)),[2]}var t})})},[n]),me().createElement("div",{id:"two-sv-popup-entry"})},o.purchasingResources);function Ee(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function Re(n){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Ee(Object(a),!0).forEach(function(e){var t,r;t=n,e=a[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):Ee(Object(a)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(a,e))})}return n}function xe(e,t,r,n,a,i,s){try{var o=e[i](s),l=o.value}catch(e){return void r(e)}o.done?t(l):Promise.resolve(l).then(n,a)}function Ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Me(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Me(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Fe=a.resources,Ne=a.errorTypeIds,De=a.errorStatusText,Be=a.events;function Oe(){function z(){ue.itemDetail.buyButtonElementDataset&&(I.paymentFlowAnalyticsService.startRobuxUpsellFlow(ue.itemDetail.buyButtonElementDataset.assetType,!!ue.itemDetail.buyButtonElementDataset.userassetId,ue.itemDetail.buyButtonElementDataset.isPrivateServer,ue.itemDetail.buyButtonElementDataset.isPlace),t.open())}function $(){var e,t,r;if(fe.ItemPurchaseUpsellService&&null!==(e=ue)&&void 0!==e&&null!==(t=e.itemDetail)&&void 0!==t&&t.expectedItemPrice)if(0<=Y-(null===ue||void 0===ue||null===(r=ue.itemDetail)||void 0===r?void 0:r.expectedItemPrice))z();else try{fe.ItemPurchaseUpsellService.startItemUpsellProcess(ue.errorObject,ue.itemDetail,ue.startOriginalFlowCallback),window.EventTracker.fireEvent(Be.NEW_UPSELL_FROM_REACT_BUY_BUTTON)}catch(e){window.EventTracker.fireEvent(Be.NEW_UPSELL_FAILED_DUE_TO_ERROR),z()}else window.EventTracker.fireEvent(Be.NEW_UPSELL_FAILED_DUE_TO_LOADING),z()}var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},X=e.customPurchaseVerificationModal,Q=e.customPurchaseVerificationModalService,Y=be().userRobuxBalance,e=Ce((0,P.createSystemFeedback)(),2),J=e[0],K=e[1],e=Ce((0,P.createSystemFeedback)(),2),Z=e[0],ee=e[1],e=Ce(j(),2),te=e[0],re=e[1],e=Ce(E(),2),ne=e[0],t=e[1],e=Ce(ye(),2),ae=e[0],ie=e[1],e=Ce(B(),2),se=e[0],oe=e[1],e=Ce(u(),2),le=e[0],ce=e[1],ue={errorObject:{},itemDetail:{},startOriginalFlowCallback:function(){return null}};function r(e){function l(){return L(!0)}var c=e.translate,i=e.assetName,s=e.assetType,o=e.assetTypeDisplayName,u=e.productId,d=e.expectedCurrency,t=e.expectedPrice,m=e.expectedSellerId,p=e.expectedPromoId,f=e.userAssetId,r=e.thumbnail,n=e.sellerName,b=e.sellerType,y=e.showSuccessBanner,g=e.isPlace,h=e.isPrivateServer,v=e.handlePurchase,S=e.onPurchaseSuccess,P=e.collectibleItemId,I=e.collectibleItemInstanceId,w=e.collectibleProductId,a=e.customProps,A=Ce((0,de.useState)(!1),2),T=A[0],E=A[1],R=Ce((0,de.useState)(null),2),x=R[0],C=R[1],M=Ce((0,de.useState)(null),2),F=M[0],N=M[1],D=Ce((0,de.useState)(t-Y),2),e=D[0],B=D[1],A=Ce((0,de.useState)(null),2),R=A[0],O=A[1],M=Ce((0,de.useState)(void 0),2),D=M[0],U=M[1],A=Ce((0,de.useState)(!1),2),q=A[0],L=A[1],M=Ce((0,de.useState)(!1),2),A=M[0],k=M[1];(0,de.useEffect)(function(){fe.CurrentUser.isAuthenticated&&void 0===be().userRobuxBalance&&he(fe.CurrentUser.userId).then(function(e){U(e.data.robux)}).catch(function(){U(void 0)})},[u,t,m]),(0,de.useEffect)(function(){q&&k(!0)},[q]);function _(){(Q||re).close(),oe.close()}function j(e,t){var r,n,a={assetType:s,assetTypeDisplayName:o,expectedCurrency:d,expectedPrice:t,expectedSellerId:m,itemName:i,itemType:s,productId:u,userassetId:f,placeproductpromotionId:p,isPrivateServer:h,isPlace:g};ue={errorObject:{shortfallPrice:e,currentCurrency:d,isPlace:g},itemDetail:{expectedItemPrice:t,assetName:i,buyButtonElementDataset:a},startOriginalFlowCallback:(r=e,n=a,function(){fe.ItemPurchaseUpsellService&&fe.ItemPurchaseUpsellService.showExceedLargestInsufficientRobuxModal?fe.ItemPurchaseUpsellService.showExceedLargestInsufficientRobuxModal(r,n,z):z()})}}function H(e){var t=e.showDivId,r=e.title,n=e.errorMsg,a=e.price,i=e.shortfallPrice,e=e.onDecline;t===Ne.transactionFailure?(C({title:r,message:n,onDecline:e}),ce.open()):t===Ne.insufficientFunds?(B(i),j(i,a),$()):t===Ne.priceChanged&&(N(a),oe.open())}function V(e){O(e),ie.open()}function G(e){P?W(e):(e={expectedCurrency:d,expectedPrice:e=e,expectedSellerId:m},0<p&&(e.expectedPromoId=p),0<f&&(e.userAssetId=f),v?v({params:e,handleError:H,setLoading:E,openConfirmation:V,closeAll:_}):(E(!0),ge.purchaseItem(u,e).then(function(e){var t=e.data;console.debug(t);var r=t.statusCode,n=t.assetIsWearable,e=t.transactionVerb;E(!1),_(),t.purchased||"TwoStepVerificationRequired"!==t.reason?500===r?H(t):(S(),y?K.success(c(Fe.purchaseCompleteHeading)):V({assetIsWearable:n,transactionVerb:e,onDecline:function(){window.location.reload()}})):l()}).catch(function(t){if(console.debug(t),E(!1),_(),t&&(null==t?void 0:t.statusText)!==De.badRequest){429===t.status&&H({title:c(Fe.errorOccuredHeading),errorMsg:c(Fe.floodcheckFailureMessage,{throttleTime:1}),showDivId:Ne.transactionFailure});try{H(JSON.parse(null==t?void 0:t.statusText))}catch(e){H({errorMsg:null==t?void 0:t.statusText})}}else H({title:c(Fe.errorOccuredHeading),errorMsg:c(Fe.purchasingUnavailableMessage),showDivId:Ne.transactionFailure})})))}var W=function(){var o,e=(o=regeneratorRuntime.mark(function e(r){var n,a,i,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n={collectibleItemId:P,expectedCurrency:d,expectedPrice:r,expectedPurchaserId:fe.CurrentUser.userId,expectedPurchaserType:"User",expectedSellerId:m,expectedSellerType:b,idempotencyKey:pe.uuidService.generateRandomUuid()},I&&(n.collectibleItemInstanceId=I),w&&(n.collectibleProductId=w),v)return v({params:n,handleError:H,setLoading:E,openConfirmation:V,closeAll:_}),t.abrupt("return");t.next=6;break;case 6:return E(!0),s=I?ge.purchaseCollectibleItemInstance:ge.purchaseCollectibleItem,t.prev=8,t.next=11,s(P,n);case 11:if(s=t.sent,a=s.data,i=a.transactionVerb,E(!1),_(),!("number"==typeof(s=null!==(s=a.statusCode)&&void 0!==s?s:a.status)&&400<=s||!1===(null==a?void 0:a.purchased))){t.next=21;break}!1===(null==a?void 0:a.purchased)&&"TwoStepVerificationRequired"===(null==a?void 0:a.reason)?l():!1===(null==a?void 0:a.purchased)&&"Flooded"===(null==a?void 0:a.purchaseResult)?H({title:c(Fe.errorOccuredHeading),errorMsg:c(Fe.floodcheckFailureMessage,{throttleTime:1}),showDivId:Ne.transactionFailure}):H({title:c(Fe.errorOccuredHeading),errorMsg:c(Fe.purchasingUnavailableMessage),showDivId:Ne.transactionFailure,onDecline:function(){window.location.reload()}}),t.next=26;break;case 21:if(S(),y)return K.success(c(Fe.purchaseCompleteHeading)),t.abrupt("return");t.next=25;break;case 25:V({assetIsWearable:!0,transactionVerb:i,itemDelayed:null==a?void 0:a.pending,onDecline:function(){window.location.reload()}});case 26:t.next=37;break;case 28:if(t.prev=28,t.t0=t.catch(8),console.debug(t.t0),fe.AccountIntegrityChallengeService.Generic.ChallengeError.matchAbandoned(x))return E(!1),t.abrupt("return");t.next=34;break;case 34:if(E(!1),_(),t.t0&&(null===t.t0||void 0===t.t0?void 0:t.t0.statusText)!==De.badRequest){429===t.t0.status&&H({title:c(Fe.errorOccuredHeading),errorMsg:c(Fe.floodcheckFailureMessage,{throttleTime:1}),showDivId:Ne.transactionFailure});try{H(JSON.parse(null===t.t0||void 0===t.t0?void 0:t.t0.statusText))}catch(e){H({errorMsg:null===t.t0||void 0===t.t0?void 0:t.t0.statusText})}}else H({title:c(Fe.errorOccuredHeading),errorMsg:c(Fe.purchasingUnavailableMessage),showDivId:Ne.transactionFailure});case 37:case"end":return t.stop()}},e,null,[[8,28]])}),function(){var e=this,s=arguments;return new Promise(function(t,r){var n=o.apply(e,s);function a(e){xe(n,t,r,a,i,"next",e)}function i(e){xe(n,t,r,a,i,"throw",e)}a(void 0)})});return function(){return e.apply(this,arguments)}}(),a=X?me().createElement(X,Re({},Re({assetName:i,assetType:s,expectedPrice:t,thumbnail:r,sellerName:n,loading:T,onAction:function(){return G(t)}},a))):me().createElement(te,{expectedPrice:t,thumbnail:r,assetName:i,assetType:s,assetTypeDisplayName:o,sellerName:n,isPlace:g,loading:T,collectibleItemId:P,collectibleItemInstanceId:I,currentRobuxBalance:D,onAction:function(){return G(t),!1}});return 0<e&&fe.ItemPurchaseUpsellService&&j(e,null!=F?F:t),me().createElement(me().Fragment,null,me().createElement(Te,{isTwoStepVerificationActive:q,stopTwoStepVerification:function(){return L(!1)},systemFeedbackService:ee}),0<e?me().createElement(ne,{robuxNeeded:e}):a,x&&me().createElement(le,{title:x.title,message:x.message,onDecline:x.onDecline}),null!=F&&me().createElement(se,{expectedPrice:t,currentPrice:F,loading:T,onAction:function(){return G(F),!1}}),R&&me().createElement(ae,Re({thumbnail:r,assetName:i,assetType:s,assetTypeDisplayName:o,sellerName:n,isPlace:g,isPrivateServer:h,expectedPrice:F||t,currentRobuxBalance:D},R)),y&&me().createElement(J,null),A&&me().createElement(Z,null))}return r.defaultProps={isPlace:!1,isPrivateServer:!1,productId:null,assetTypeDisplayName:"",expectedPromoId:0,userAssetId:0,showSuccessBanner:!1,handlePurchase:null,onPurchaseSuccess:function(){return null},customProps:{},collectibleItemId:null,collectibleItemInstanceId:null,collectibleProductId:null,sellerType:null},r.propTypes={translate:i().func.isRequired,productId:function(e,t,r){var n=e.collectibleItemId,a=e.productId;return n||"number"==typeof a?null:new Error("Invalid prop ".concat(t," supplied to ").concat(r,". Validation failed."))},expectedCurrency:i().number.isRequired,expectedPrice:i().number.isRequired,thumbnail:i().node.isRequired,assetName:i().string.isRequired,assetType:i().string.isRequired,assetTypeDisplayName:i().string,expectedSellerId:i().number.isRequired,sellerName:i().string.isRequired,sellerType:i().string,isPlace:i().bool,isPrivateServer:i().bool,expectedPromoId:i().number,userAssetId:i().number,showSuccessBanner:i().bool,handlePurchase:i().func,onPurchaseSuccess:i().func,customProps:i().func,collectibleItemId:i().string,collectibleItemInstanceId:i().string,collectibleProductId:i().string},[(0,s.withTranslations)(r,o.purchasingResources),{start:function(){(Q||re).open(),$()}}]}var Ue=HeaderScripts;function qe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Le(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Le(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Le(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ke=a.errorMessages,_e=function(e,t,r){function n(){s({loading:!1,loadFailure:!0})}var a=qe((0,de.useState)({expectedSellerId:0,owned:!1,isPurchasable:!1,id:0,itemType:"",assetType:"",name:"",description:"",productId:0,creatorTargetId:0,creatorName:"",price:null,loading:!0,loadFailure:!1,premiumPricing:null,premiumDiscountPercentage:null,hasLimitedPrivateSales:!1,isPublicDomain:!1,premiumPriceInRobux:null,assetTypeDisplayName:"",offSaleDeadline:null,unitsAvailableForConsumption:0,isLimited:!1,resellerAvailable:!1,firstReseller:{},priceStatus:"",isMarketPlaceEnabled:!0}),2),i=a[0],s=a[1],o=(0,de.useCallback)(function(){e(t,r).then(function(e){var e=e.data,t={expectedSellerId:e.expectedSellerId,owned:e.owned,id:e.id,itemType:e.itemType,assetType:e.assetType,name:e.name,description:e.description,productId:e.productId,price:e.price,lowestPrice:e.lowestPrice,creatorTargetId:e.creatorTargetId,creatorName:e.creatorName,hasLimitedPrivateSales:void 0!==e.lowestPrice,isPublicDomain:0===e.price,offSaleDeadline:e.offSaleDeadline,isLimited:e.itemRestrictions.includes("Limited")||e.itemRestrictions.includes("LimitedUnique"),unitsAvailableForConsumption:void 0!==e.unitsAvailableForConsumption?e.unitsAvailableForConsumption:0,priceStatus:void 0!==e.priceStatus?e.priceStatus:""};void 0!==e.premiumPricing&&(t.premiumPriceInRobux=e.premiumPricing.premiumPriceInRobux,t.premiumDiscountPercentage=e.premiumPricing.premiumDiscountPercentage),t.isLimited&&(t.price=void 0!==t.lowestPrice?t.lowestPrice:t.price,ne(t.id).then(function(e){t.resellerAvailable=0<e.data.data.length,t.resellerAvailable&&(e=qe(e.data.data,1)[0],t.price=e.price,t.firstReseller=e)})),re(e.productId).then(function(e){!e.data.purchasable&&e.data.reason&&e.data.reason!==ke.insufficientFunds?t.isPurchasable=e.data.purchasable:t.isPurchasable=!0,t.assetTypeDisplayName=e.data.assetTypeDisplayName,t.loading=!1,t.loadFailure=!1,ae().then(function(e){t.isMarketPlaceEnabled=e.data.isMarketPlaceEnabled&&e.data.isItemsXchangeEnabled,s(t)}).catch(function(){n()})}).catch(function(e){e.statusText===ke.unauthorizedMessage?(t.loading=!1,t.loadFailure=!1,s(t)):n()})}).catch(function(){n()})},[t,r,e]);return(0,de.useEffect)(function(){o()},[]),{itemDetail:i,loadItemDetail:o}},je=function(){var e=document.getElementById("item-container");return e?{itemDetailItemId:parseInt(e.getAttribute("data-item-id"),10),itemDetailItemType:e.getAttribute("data-item-type")}:null},He=RobloxThumbnails;function Ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ge=Oe(),We=(Rt=(Rt=2,function(e){if(Array.isArray(e))return e}(Ge=Ge)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return r}(Ge,Rt)||function(e,t){if(!e)return;if("string"==typeof e)return Ve(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ve(e,t)}(Ge,Rt)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))[0],ze=Rt[1],$e=a.resources,Xe=b.getPremiumConversionUrl;function Qe(e){var t=e.translate,r=e.productId,n=e.price,a=e.itemName,i=e.itemType,s=e.assetTypeDisplayName,o=e.sellerName,l=e.expectedSellerId,c=e.isPurchasable,u=e.isOwned,d=e.isPlugin,m=e.itemDetailItemId,p=e.loading,f=e.userQualifiesForPremiumPrices,b=e.premiumPriceInRobux,y=e.isAuthenticated,g=e.resellerAvailable,h=e.firstReseller,g=e.isMarketPlaceEnabled&&(g||c),c=function(){return t(0===n?$e.getAction:$e.buyAction)};if(p)return me().createElement(P.Loading,null);if(!y)return null!=b?me().createElement(P.Button,{id:"upgrade-button",className:"btn-fixed-width-lg btn-primary-lg",onClick:function(){I.paymentFlowAnalyticsService.sendUserPurchaseFlowEvent(I.paymentFlowAnalyticsService.ENUM_TRIGGERING_CONTEXT.WEB_PREMIUM_PURCHASE,!1,I.paymentFlowAnalyticsService.ENUM_VIEW_NAME.PREMIUM_UPSELL,I.paymentFlowAnalyticsService.ENUM_PURCHASE_EVENT_TYPE.USER_INPUT,I.paymentFlowAnalyticsService.ENUM_VIEW_MESSAGE.GET_PREMIUM),window.open(Xe(m,i))}},t($e.getPremiumAction)):me().createElement(P.Button,{className:"btn-fixed-width-lg btn-growth-lg PurchaseButton",onClick:function(){window.location="/login"}},c());y=me().createElement(He.Thumbnail2d,{type:"bundle"===i?He.ThumbnailTypes.bundleThumbnail:He.ThumbnailTypes.assetThumbnail,size:He.DefaultThumbnailSize,targetId:m,format:He.ThumbnailFormat.png,altName:a});return d&&(u||0===n)?me().createElement(me().Fragment,null,me().createElement(P.Button,{className:"btn-fixed-width-lg btn-primary-lg InstallButton",onClick:function(){var e;e=m,fe.GameLauncher.openPluginInStudio(e)}},me().createElement("span",null,t($e.installAction)))):me().createElement(me().Fragment,null,me().createElement(P.Button,{className:"btn-fixed-width-lg btn-growth-lg PurchaseButton",onClick:ze.start,isDisabled:!g},c()),me().createElement(We,{productId:r,expectedPrice:f&&null!=b?b:n,thumbnail:y,assetTypeDisplayName:s,assetName:a,sellerName:h?h.seller.name:o,expectedSellerId:h?h.seller.id:l,userAssetId:h?h.userAssetId:0,showSuccessBanner:!0}))}Qe.propTypes={translate:i().func.isRequired,productId:i().number.isRequired,price:i().number.isRequired,itemName:i().string.isRequired,itemType:i().string.isRequired,assetTypeDisplayName:i().string.isRequired,sellerName:i().string.isRequired,expectedSellerId:i().number.isRequired,isPurchasable:i().bool.isRequired,isOwned:i().bool.isRequired,isPlugin:i().bool.isRequired,itemDetailItemId:i().number.isRequired,loading:i().bool.isRequired,userQualifiesForPremiumPrices:i().bool.isRequired,premiumPriceInRobux:i().number.isRequired,isAuthenticated:i().bool.isRequired,resellerAvailable:i().bool.isRequired,firstReseller:i().shape({seller:{name:i().string.isRequired,id:i().number.isRequired},userAssetId:i().number.isRequired}).isRequired,isMarketPlaceEnabled:i().bool.isRequired};var Ye=(0,s.withTranslations)(Qe,o.itemResources),Je=a.resources;function Ke(e){var t=e.translate,r=e.isLimited,e=e.resellerAvailable,e=r&&e;return me().createElement("div",{className:"text-label field-label price-label"},me().createElement("span",null,t(e?Je.bestPriceLabel:Je.priceLabel)))}Ke.propTypes={translate:i().func.isRequired,isLimited:i().bool.isRequired,resellerAvailable:i().bool.isRequired};var Ze=(0,s.withTranslations)(Ke,o.itemResources),et=a.resources,tt=a.errorMessages,rt=b.getPremiumConversionUrl;function nt(e){function t(e){I.paymentFlowAnalyticsService.sendUserPurchaseFlowEvent(I.paymentFlowAnalyticsService.ENUM_TRIGGERING_CONTEXT.WEB_PREMIUM_PURCHASE,!1,I.paymentFlowAnalyticsService.ENUM_VIEW_NAME.PREMIUM_UPSELL,I.paymentFlowAnalyticsService.ENUM_PURCHASE_EVENT_TYPE.USER_INPUT,e.target.innerText)}var r=e.translate,n=e.price,a=e.itemType,i=e.itemDetailItemId,s=e.premiumPriceInRobux,o=e.premiumDiscountPercentage,l=e.userQualifiesForPremiumPrices,c=e.isOwned,u=e.loading,d=e.loadFailure,m=e.unitsAvailableForConsumption,p=e.isLimited,f=e.isPlugin,b=e.resellerAvailable,y=e.priceStatus,g=e.offSaleDeadline,h=e.isMarketPlaceEnabled,v=null==s&&null==n,S=!0,e="";return u?me().createElement(P.Loading,null):(!u&&d?e=tt.retryErrorMessage:y===et.offSale&&null===g?e=r(et.itemNoLongerForSaleLabel):h||c?f||!c||p?p&&0===m&&!b?e=r(et.noOneCurrentlySellingLabel):S=!1:e=r(et.itemAvailableInventoryLabel):e=r(et.purchasingTemporarilyUnavailableLabel),0===n?null:S&&!c?me().createElement("div",{className:"price-container-text"},me().createElement("div",{className:"item-first-line"}," ",e," ")):me().createElement(me().Fragment,null,me().createElement("div",{className:"price-container-text"},S?me().createElement("div",{className:"item-first-line"}," ",e," "):null,me().createElement(Ze,{translate:r,isLimited:p,resellerAvailable:b}),me().createElement("div",{className:"price-info"},me().createElement("div",{className:"icon-text-wrapper clearfix icon-robux-price-container"},v?me().createElement("span",{className:"icon-robux-16x16 icon-robux-gray-16x16 wait-for-i18n-format-render"}):me().createElement("span",{className:"icon-robux-16x16 wait-for-i18n-format-render"}),me().createElement("span",{className:"text-robux-lg wait-for-i18n-format-render"},l&&null!=s?pe.numberFormat.getNumberFormat(s):pe.numberFormat.getNumberFormat(n)))),function(){if(null==s||c)return null;if(null==n)return l?me().createElement("span",{className:"small text field-content empty-label wait-for-i18n-format-render"},r(et.premiumExclusiveEligiblePromptLabel)):me().createElement("span",{className:"small text field-content empty-label wait-for-i18n-format-render"},r(et.premiumExclusiveIneligiblePromptLabel));var e={originalPrice:(0,A.renderToString)(me().createElement(T,{price:n})),discountPercentage:o,premiumDiscountedPrice:(0,A.renderToString)(me().createElement(T,{price:s}))};return me().createElement(me().Fragment,null,me().createElement("div",{className:"text-label field-label empty-label"}," "),me().createElement("span",{className:"premium-prompt small text field-content empty-label wait-for-i18n-format-render"},l?me().createElement("a",{"aria-label":" ",href:rt(i,a),dangerouslySetInnerHTML:{__html:r(et.premiumDiscountSavingsLabel,e)},onClick:function(e){t(e),window.open(rt(i,a))}}):me().createElement("a",{"aria-label":" ",href:rt(i,a),dangerouslySetInnerHTML:{__html:r(et.premiumDiscountOpportunityPromptLabel,e)},onClick:function(e){t(e),window.open(rt(i,a))}})))}())))}nt.propTypes={translate:i().func.isRequired,price:i().number.isRequired,itemType:i().string.isRequired,itemDetailItemId:i().number.isRequired,premiumPriceInRobux:i().number.isRequired,premiumDiscountPercentage:i().number.isRequired,userQualifiesForPremiumPrices:i().bool.isRequired,loading:i().bool.isRequired,isOwned:i().bool.isRequired,loadFailure:i().bool.isRequired,unitsAvailableForConsumption:i().number.isRequired,isLimited:i().bool.isRequired,isPlugin:i().bool.isRequired,resellerAvailable:i().bool.isRequired,priceStatus:i().string.isRequired,offSaleDeadline:i().string.isRequired,isMarketPlaceEnabled:i().bool.isRequired};var at=(0,s.withTranslations)(nt,o.itemModelResources);function it(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return st(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return st(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function st(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ot=a.resources;function lt(e){var t=e.translate,r=e.offSaleDeadline,e=it((0,de.useState)(0),2),n=e[0],a=e[1],e=it((0,de.useState)(0),2),i=e[0],s=e[1],e=it((0,de.useState)(0),2),o=e[0],l=e[1],e=it((0,de.useState)(0),2),c=e[0],u=e[1];(0,de.useEffect)(function(){function e(){var e;new Date<new Date(r)&&(e=+new Date,e=(new Date(r).getTime()-e)/1e3,a(Math.floor(e/86400)),s(Math.floor(e/3600%24)),l(Math.floor(e/60%60)),u(Math.floor(e%60)))}var t;return e(),t=setInterval(e,1e3),function(){return clearInterval(t)}},[a,s,l,u]);return me().createElement("div",{id:"sale-clock",className:"text-error sale-clock desktop-sale-clock"},function(){if(n<1){var e={numberOfHours:i,numberOfMinutes:o,numberOfSeconds:c};return me().createElement("div",{className:"text",dangerouslySetInnerHTML:{__html:t(ot.OffsaleCountdownHourMinuteSecondLabel,e)}})}if(c<1)return window.location.reload(),null;e={numberOfDays:n,numberOfHours:i,numberOfMinutes:o};return me().createElement("div",{className:"text",dangerouslySetInnerHTML:{__html:t(ot.CountdownTimerDayHourMinute,e)}})}())}lt.propTypes={translate:i().func.isRequired,offSaleDeadline:i().string.isRequired};var ct=(0,s.withTranslations)(lt,o.itemResources),ut=a.resources,dt=a.assetTypes,mt=a.assetCategory,pt=b.getInventoryUrl;function ft(e){var t=e.translate,r=e.assetType,n=Ue.deviceMeta.getDeviceMeta(),a="phone"===n.deviceType,e=pt(Ue.authenticatedUser.id),i=r===dt.Plugin||r===dt.Decal||r===dt.Model||r===dt.Video||r===dt.Animation?mt.Library:r===dt.Place||r===dt.Badge||r===dt.GamePass||r===dt.Animation?null:mt.Catalog;return i!==mt.Catalog||n.isInApp||!Ue.deviceMeta.isAndroidApp&&!Ue.deviceMeta.isIosApp||!Ue.deviceMeta.isPhone&&!Ue.deviceMeta.isTablet?i!==mt.Catalog||a?me().createElement("a",{id:"inventory-button",href:e,className:"btn-fixed-width-lg btn-control-md"},t(ut.inventoryAction)):me().createElement("a",{id:"edit-avatar-button",href:"/my/avatar",className:"btn-control-md"},me().createElement("span",{className:"icon-nav-charactercustomizer"})):me().createElement("a",{id:"open-in-avatar-editor-button",href:"/#",className:"btn-fixed-width-lg btn-control-md"},me().createElement("span",{className:"icon-nav-charactercustomizer"}))}ft.propTypes={translate:i().func.isRequired,assetType:i().number.isRequired};var bt=(0,s.withTranslations)(ft,o.itemResources),yt=je,gt=a.assetTypes;function ht(e){var t=e.translate,e=yt(),r=e.itemDetailItemId,e=e.itemDetailItemType,n=_e(te,r,e).itemDetail;return me().createElement(me().Fragment,null,me().createElement(at,{translate:t,price:n.price,itemType:n.itemType,itemDetailItemId:r,premiumPriceInRobux:n.premiumPriceInRobux,premiumDiscountPercentage:n.premiumDiscountPercentage,userQualifiesForPremiumPrices:Ue.authenticatedUser.isPremiumUser,isOwned:n.owned,loading:n.loading,loadFailure:n.loadFailure,unitsAvailableForConsumption:n.unitsAvailableForConsumption,isLimited:n.isLimited,isPlugin:n.assetType===gt.Plugin,resellerAvailable:n.resellerAvailable,priceStatus:n.priceStatus,offSaleDeadline:n.offSaleDeadline,isMarketPlaceEnabled:n.isMarketPlaceEnabled}),!n.loadFailure&&(n.owned&&(!n.isLimited||0<n.unitsAvailableForConsumption)?me().createElement("div",{className:"action-button"},me().createElement(bt,{translate:t,assetType:n.assetType})):me().createElement("div",{className:"action-button"},me().createElement(Ye,{translate:t,productId:n.productId,price:n.price,itemType:n.itemType,assetTypeDisplayName:n.assetTypeDisplayName,itemName:n.name,sellerName:n.creatorName,expectedSellerId:n.expectedSellerId,isPurchasable:n.isPurchasable,isOwned:n.owned,isInstallable:n.assetType===gt.Plugin,itemDetailItemId:r,loading:n.loading,hasLimitedPrivateSales:n.hasLimitedPrivateSales,userQualifiesForPremiumPrices:Ue.authenticatedUser.isPremiumUser,premiumPriceInRobux:n.premiumPriceInRobux,isAuthenticated:Ue.authenticatedUser.isAuthenticated,unitsAvailableForConsumption:n.unitsAvailableForConsumption,isLimited:n.isLimited,resellerAvailable:n.resellerAvailable,firstReseller:n.firstReseller,isMarketPlaceEnabled:n.isMarketPlaceEnabled}),null!==n.offSaleDeadline&&me().createElement(ct,{translate:t,offSaleDeadline:n.offSaleDeadline}))))}ht.propTypes={translate:i().func.isRequired};var vt=ht;function St(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Pt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Pt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function It(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function wt(n){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?It(Object(a),!0).forEach(function(e){var t,r;t=n,e=a[r=e],r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):It(Object(a)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(a,e))})}return n}var At,e=function(e,t){e=wt(wt({},e),{},{expectedSellerId:t.expectedSellerId,owned:t.owned,id:t.id,itemType:t.itemType,assetType:t.assetType,name:t.name,description:t.description,productId:t.productId,price:t.price,lowestPrice:t.lowestPrice,creatorTargetId:t.creatorTargetId,creatorName:t.creatorName,hasLimitedPrivateSales:void 0!==t.lowestPrice,isPublicDomain:0===t.price,offSaleDeadline:t.offSaleDeadline,isLimited:t.itemRestrictions.includes("Limited")||t.itemRestrictions.includes("LimitedUnique"),collectibleItemId:t.collectibleItemId,collectibleItemDetails:t.collectibleItemDetails,unitsAvailableForConsumption:void 0!==t.unitsAvailableForConsumption?t.unitsAvailableForConsumption:0,priceStatus:null!==(e=t.priceStatus)&&void 0!==e?e:t.priceStatus});return void 0!==t.premiumPricing&&(e.premiumPriceInRobux=t.premiumPricing.premiumPriceInRobux,e.premiumDiscountPercentage=t.premiumPricing.premiumDiscountPercentage),e.isLimited&&(e.price=void 0!==e.lowestPrice?e.lowestPrice:e.price),void 0!==e.collectibleItemId&&(e.resellerAvailable=t.hasResellers,e.isPurchasable=void 0!==t.lowestPrice,e.isMarketPlaceEnabled="ShopAndAllExperiences"===t.saleLocationType),e},Tt=function(e,t){e=wt({},e);return e.resellerAvailable=0<t.data.data.length,e.resellerAvailable&&(t=St(t.data.data,1)[0],e.price=t.price,e.firstReseller=t),e},Et=function(e,t,r){var n=a.errorMessages,e=wt({},e);return!t.purchasable&&t.reason&&t.reason!==n.insufficientFunds&&t.reason!==n.twoStepVerificationRequired?e.isPurchasable=t.purchasable:(!t.purchasable&&t.reason&&t.reason===n.twoStepVerificationRequired&&(e.twoStepVerificationRequired=!0),e.isPurchasable=!0),e.assetTypeDisplayName=t.assetTypeDisplayName,e.loading=!1,e.loadFailure=!1,e.isMarketPlaceEnabled=r.data.isMarketPlaceEnabled&&r.data.isItemsXchangeEnabled,e},Rt=function(e){e=wt({},e);return e.isPurchasable=!1,e};(je=At=At||{}).Asset="asset",je.Bundle="bundle";var xt=At;function Ct(e,t,r,n,a,i,s){try{var o=e[i](s),l=o.value}catch(e){return void r(e)}o.done?t(l):Promise.resolve(l).then(n,a)}function Mt(o){return function(){var e=this,s=arguments;return new Promise(function(t,r){var n=o.apply(e,s);function a(e){Ct(n,t,r,a,i,"next",e)}function i(e){Ct(n,t,r,a,i,"throw",e)}a(void 0)})}}function Ft(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Nt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Nt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Dt=a.maxBatchLoadRetries,Bt=e,Ot=Tt,Ut=Et,qt=Rt,Lt=function(i){var a=(r=Ft((0,de.useState)(),2))[0],t=r[1],e=Ft((0,de.useState)([]),2),r=e[0],s=e[1],o=(e=Ft((0,de.useState)({}),2))[0],l=e[1],n=0,c=function(){n<Dt?(b(),n+=1):s([{loading:!1,loadFailure:!0}])},u=(0,de.useCallback)(function(){Ue.authenticatedUser.isAuthenticated?ae().then(function(e){t(e)}).catch(function(){c()}):t({data:{isMarketplaceEnabled:!1,isItemsXchangeEnabled:!1}})},[]);function d(e){return m.apply(this,arguments)}function m(){return(m=Mt(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.inCache)return e.abrupt("return",o[t.itemType.toLowerCase()][t.id]);e.next=2;break;case 2:if((r=Bt({},t)).isLimited)return e.prev=4,e.next=7,ne(r.id);e.next=14;break;case 7:n=e.sent,r=Ot(r,n),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),r.resellerAvailable=!1;case 14:if(void 0===t.productId){e.next=23;break}if(Ue.authenticatedUser.isAuthenticated)return e.next=18,re(t.productId);e.next=22;break;case 18:n=e.sent,r=Ut(r,n.data,a),e.next=23;break;case 22:r=qt(r);case 23:return e.abrupt("return",r);case 24:case"end":return e.stop()}},e,null,[[4,11]])}))).apply(this,arguments)}function p(){return(p=Mt(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all(t.map(function(e){return d(e)}));case 3:r=e.sent,s(r),n=o,r.forEach(function(e){e.isLimited||o[e.itemType.toLowerCase()][e.id]||(n[e.itemType.toLowerCase()][e.id]=e)}),l(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),c();case 13:case"end":return e.stop()}},e,null,[[0,10]])}))).apply(this,arguments)}function f(){return(f=Mt(regeneratorRuntime.mark(function e(){var t,r,n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],i.forEach(function(e){void 0===o[e.itemType.toLowerCase()][e.id]&&t.push(e)}),0<t.length)return n=[],t.map(function(e){return n.push({itemType:e.itemType,id:e.id})}),e.next=7,fe.ItemDetailsHydrationService.getItemDetails(n);e.next=8;break;case 7:r=e.sent;case 8:return a=[],i.forEach(function(t){var e;void 0===o[t.itemType.toLowerCase()][t.id]?(e=r.find(function(e){return e.id===t.id&&e.itemType.toLowerCase()===t.itemType.toLowerCase()}))&&a.push(e):a.push({id:t.id,itemType:t.itemType,inCache:!0})}),e.abrupt("return",a);case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}var b=(0,de.useCallback)(function(){(function(){return f.apply(this,arguments)})().then(function(e){try{!function(){p.apply(this,arguments)}(e)}catch(e){c()}}).catch(function(){c()})},[a,i,d]);return(0,de.useEffect)(function(){var e={};e[xt.Asset]={},e[xt.Bundle]={},l(e),u()},[]),(0,de.useEffect)(function(){void 0!==a&&b()},[a,i]),{itemDetails:r,batchLoadItemDetails:b}};(Rt=Zt=Zt||{}).Success="Success",Rt.AlreadyOwned="AlreadyOwned",Rt.InsufficientFunds="InsufficientFunds",Rt.ExceptionOccured="ExceptionOccurred",Rt.TooManyPurchases="TooManyPurchases",Rt.CaughtError="CaughtError",Rt.PremiumNeeded="InsufficientMembership",Rt.NoSellers="NotForSale",Rt.TwoStepVerificationRequired="TwoStepVerificationRequired";var kt=Zt;function _t(e,t,r,n,a,i,s){try{var o=e[i](s),l=o.value}catch(e){return void r(e)}o.done?t(l):Promise.resolve(l).then(n,a)}function jt(o){return function(){var e=this,s=arguments;return new Promise(function(t,r){var n=o.apply(e,s);function a(e){_t(n,t,r,a,i,"next",e)}function i(e){_t(n,t,r,a,i,"throw",e)}a(void 0)})}}function Ht(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Vt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Vt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Gt=a.resources,Wt=a.batchBuyMaxThumbnails,zt=a.floodcheckTime;function $t(e){var t=e.itemsCount,r=e.item,n=e.index,a=r.name,e=t-Wt,n=Wt<t&&n===Wt-1;return me().createElement("div",{className:"modal-multi-item-image-container"},me().createElement(He.Thumbnail2d,{type:r.itemType.toLowerCase()===xt.Bundle?He.ThumbnailTypes.bundleThumbnail:He.ThumbnailTypes.assetThumbnail,size:He.DefaultThumbnailSize,targetId:r.id,containerClass:"batch-buy-thumbnail",format:He.ThumbnailFormat.png,altName:a}),n&&me().createElement("div",{className:"thumb-overlay"},me().createElement("div",{className:"font-header-1"},"＋",e)))}function Xt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Qt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Qt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Yt,Jt=(Rt=Xt(E(),2))[0],Kt=Rt[1],Zt=Xt((Yt=(Et=Ht((0,P.createModal)(),2))[0],Et=Et[1],rr.defaultProps={title:"",loading:!1},rr.propTypes={translate:i().func.isRequired,title:i().string,expectedTotalPrice:i().number.isRequired,currentRobuxBalance:i().number.isRequired,itemDetails:i().arrayOf(i().shape({productId:i().number.isRequired,price:i().number.isRequired,itemName:i().string.isRequired,itemType:i().string.isRequired,assetTypeDisplayName:i().string.isRequired,sellerName:i().string.isRequired,expectedSellerId:i().number.isRequired,isPurchasable:i().bool.isRequired,isOwned:i().bool.isRequired,isPlugin:i().bool.isRequired,itemDetailItemId:i().number.isRequired,loading:i().bool.isRequired,userQualifiesForPremiumPrices:i().bool.isRequired,premiumPriceInRobux:i().number.isRequired,isAuthenticated:i().bool.isRequired,resellerAvailable:i().bool.isRequired,firstReseller:i().shape({seller:{name:i().string.isRequired,id:i().number.isRequired},userAssetId:i().number.isRequired}).isRequired,isMarketPlaceEnabled:i().bool.isRequired})).isRequired,onCancel:i().func.isRequired,onTransactionComplete:i().func.isRequired,onAction:i().func.isRequired,loading:i().bool,systemFeedbackService:i().func.isRequired},[(0,s.withTranslations)(rr,o.purchasingResources),Et]),2),er=Zt[0],tr=Zt[1];function rr(e){var t,r=e.translate,n=e.title,a=e.expectedTotalPrice,i=e.itemDetails,s=e.currentRobuxBalance,o=e.onCancel,l=e.onTransactionComplete,c=e.onAction,u=e.loading,d=e.systemFeedbackService,m=Ht((0,de.useState)(!1),2),p=m[0],f=m[1],b=function(){d.loading(r("Message.TwoStepVerificationBatchPurchase")),f(!0)},y=Ht((0,de.useState)(!1),2),g=y[0],h=y[1],v={itemCount:i.length,robux:(0,A.renderToString)(me().createElement("span",{className:"robux-price"},me().createElement(T,{price:a})))},e=Gt.batchBuyPromptMessage,m=0===a?(t=r(Gt.getItemHeading),r(Gt.getNowAction)):(t=r(Gt.buyItemHeading),r(Gt.buyNowAction)),y=null==i?void 0:i.slice(0,Wt);function S(){return(S=jt(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={expectedPrice:t.premiumPriceInRobux&&Ue.authenticatedUser.isPremiumUser?t.premiumPriceInRobux:t.price,expectedSellerId:t.firstReseller?t.firstReseller.seller.id:void 0,userAssetId:t.firstReseller?t.firstReseller.userAssetId:void 0},e.prev=1,e.next=4,ge.purchaseItem(t.productId,r);case 4:(n=e.sent).data.itemData={assetId:t.itemType.toLowerCase()===xt.Asset?t.id:void 0,bundleId:t.itemType.toLowerCase()===xt.Bundle?t.id:void 0},e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),n={data:{itemData:{assetId:t.itemType.toLowerCase()===xt.Asset?t.id:void 0,bundleId:t.itemType.toLowerCase()===xt.Bundle?t.id:void 0},reason:kt.CaughtError}};case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}},e,null,[[1,8]])}))).apply(this,arguments)}var P=function(){var e=jt(regeneratorRuntime.mark(function e(t){var r,n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.collectibleItemDetails,r=0<a.unitsAvailableForConsumption&&(!a.hasResellers||a.price<a.lowestResalePrice),n=a.lowestPrice,n={collectibleItemId:t.collectibleItemId,expectedCurrency:1,expectedPrice:n,expectedPurchaserId:fe.CurrentUser.userId,expectedPurchaserType:"User",idempotencyKey:pe.uuidService.generateRandomUuid()},!r&&a.lowestAvailableResaleItemInstanceId&&(n.collectibleItemInstanceId=a.lowestAvailableResaleItemInstanceId),!r&&a.lowestAvailableResaleProductId?n.collectibleProductId=a.lowestAvailableResaleProductId:n.collectibleProductId=a.collectibleProductId,a=r?ge.purchaseCollectibleItem:ge.purchaseCollectibleItemInstance,r={data:{}},e.prev=8,e.next=11,a(t.collectibleItemId,n);case 11:a=e.sent,n=a.data,n.transactionVerb,r.data.itemData={assetId:t.itemType.toLowerCase()===xt.Asset?t.id:void 0,bundleId:t.itemType.toLowerCase()===xt.Bundle?t.id:void 0},"number"==typeof(a=null!==(a=n.statusCode)&&void 0!==a?a:n.status)&&400<=a||!1===(null==n?void 0:n.purchased)?!1===(null==n?void 0:n.purchased)&&"TwoStepVerificationRequired"===(null==n?void 0:n.reason)?r.data.reason=kt.TwoStepVerificationRequired:!1===(null==n?void 0:n.purchased)&&"Flooded"===(null==n?void 0:n.purchaseResult)?r.data.reason=kt.TooManyPurchases:r.data.reason=kt.ExceptionOccured:r.data.reason=kt.Success,e.next=22;break;case 19:e.prev=19,e.t0=e.catch(8),r={data:{itemData:{assetId:t.itemType.toLowerCase()===xt.Asset?t.id:void 0,bundleId:t.itemType.toLowerCase()===xt.Bundle?t.id:void 0},reason:kt.CaughtError}};case 22:return e.abrupt("return",r);case 23:case"end":return e.stop()}},e,null,[[8,19]])}));return function(){return e.apply(this,arguments)}}();function I(e){var t=function(e,t){var r=0,n=[],a=!1;if(e.forEach(function(t){var e;t.data.reason===kt.Success?r+=1:(e=n.find(function(e){return e.error===t.data.reason}),t.data.reason===kt.TwoStepVerificationRequired&&(a=!0),e?e.count+=1:n.push({error:t.data.reason,count:1}))}),r===e.length)return{success:!0,message:Gt.purchaseCompleteHeading};var i={error:"",count:0};if(n.forEach(function(e){e.count>i.count&&(i=e)}),a&&t(),0<r)switch(i.error){case kt.AlreadyOwned:return{success:!1,message:Gt.batchBuyPartialSuccessItemsOwnedFailureMessage,params:{itemCountSuccess:r,itemCountFailure:i.count}};case kt.InsufficientFunds:return{success:!1,message:Gt.batchBuyPartialSuccessInsufficientFundsFailureMessage,params:{itemCountSuccess:r,itemCountFailure:i.count}};case kt.ExceptionOccured:return{success:!1,message:Gt.batchBuyPartialSuccessNetworkErrorFailureMessage,params:{itemCountSuccess:r,itemCountFailure:i.count}};case kt.TooManyPurchases:return{success:!1,message:Gt.batchBuyPartialSuccessFloodcheckFailureMessage,params:{itemCountSuccess:r,itemCountFailure:i.count}};case kt.PremiumNeeded:return{success:!1,message:Gt.batchBuyPartialSuccessPremiumNeededFailureMessage,params:{itemCountSuccess:r,itemCountFailure:i.count}};case kt.NoSellers:return{success:!1,message:Gt.batchBuyPartialSuccessNoSellersFailureMessage,params:{itemCountSuccess:r,itemCountFailure:i.count}};default:return{success:!1,message:Gt.batchBuyPartialSuccessGeneralFailureMessage,params:{itemCountSuccess:r,itemCountFailure:i.count}}}else switch(i.error){case kt.AlreadyOwned:return{success:!1,message:Gt.batchBuyItemsOwnedFailureMessage};case kt.InsufficientFunds:return{success:!1,message:Gt.insufficientFundsFailureMessage};case kt.ExceptionOccured:return{success:!1,message:Gt.networkErrroFailureMessage};case kt.TooManyPurchases:return{success:!1,message:Gt.floodcheckFailureMessage,params:{throttleTime:zt}};case kt.PremiumNeeded:return{success:!1,message:Gt.premiumNeededFailureMessage};case kt.NoSellers:return{success:!1,message:Gt.noSellersFailureMessage};default:return{success:!1,message:Gt.purchaseErrorFailureMessage}}}(e,b),e=t.params?r(t.message,t.params):r(t.message);t.success?d.success(e):d.warning(e)}function w(){return(w=jt(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(i.map(function(e){return(e.collectibleItemId?P:function(){return S.apply(this,arguments)})(e)}));case 2:I(t=e.sent),l(t);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}y=me().createElement(de.Fragment,null,me().createElement("div",{className:"modal-message multi-item",dangerouslySetInnerHTML:{__html:r(e,v)}}),void 0!==i&&0<i.length&&me().createElement("div",{className:"modal-multi-item-images-container"},y.map(function(e,t){return me().createElement($t,{key:e.itemId,itemsCount:i.length,item:e,index:t})})));return me().createElement(me().Fragment,null,me().createElement(Te,{isTwoStepVerificationActive:p,stopTwoStepVerification:function(){h(!0),f(!1)},systemFeedbackService:d}),me().createElement(Yt,{title:n||t,body:y,neutralButtonText:r(Gt.cancelAction),actionButtonText:m,onAction:function(){var t=!1;i.forEach(function(e){t=t||e.twoStepVerificationRequired}),t&&!g?b():(function(){w.apply(this,arguments)}(),c())},onNeutral:function(){o()},footerText:me().createElement(C,{expectedPrice:a,currentRobuxBalance:s}),loading:u,actionButtonShow:i}))}var nr=a.resources;function ar(e){var t=e.currentUserBalance,r=e.items,n=e.itemDetails,a=e.onBuyButtonClick,i=e.onConfirm,s=e.onCancel,o=e.onTransactionComplete,l=e.systemFeedbackService,c=e.translate,u=!1,d=0,m=0,p=[],f=Xt((0,de.useState)(!1),2),e=f[0],b=f[1];if(!Ue.authenticatedUser.isAuthenticated)return me().createElement("div",{className:"sign-in"},me().createElement(P.Button,{className:"action-button batch-buy-purchase-button sign-in-button",variant:P.Button.variants.growth,size:P.Button.sizes.large,onClick:function(){var e;window.location=(e={ReturnUrl:window.location.pathname},pe.urlService.getUrlWithQueries("/login",e))}},c(nr.buyAction)));if(void 0===n||0<n.length&&n[0]&&n[0].loading||void 0===t)return me().createElement("div",{className:"loading"},me().createElement(P.Button,{className:"action-button batch-buy-purchase-button",variant:P.Button.variants.growth,size:P.Button.sizes.large,isDisabled:!0},me().createElement(P.Loading,null)));if(0===n.length||n[0]&&n[0].loadFailure)return me().createElement(P.Button,{className:"action-button batch-buy-purchase-button",variant:P.Button.variants.growth,size:P.Button.sizes.large,isDisabled:!0},c(nr.buyAction));n.forEach(function(e){var t;(void 0!==(t=e).collectibleItemId?t.isMarketPlaceEnabled&&t.isPurchasable||t.resellerAvailable:t.isMarketPlaceEnabled&&(t.resellerAvailable||t.isPurchasable))&&(u=!0),e.premiumPriceInRobux&&Ue.authenticatedUser.isPremiumUser?m+=e.premiumPriceInRobux:e.lowestPrice?d+=e.lowestPrice:e.price&&(d+=e.price),e.resellerAvailable&&p.push(e)});var y=d+m-t;return me().createElement(me().Fragment,null,me().createElement("div",null,me().createElement(P.Button,{className:"action-button batch-buy-purchase-button",variant:P.Button.variants.growth,size:P.Button.sizes.large,onClick:function(){(0<y?Kt:tr).open(),a()},isDisabled:!u},e?me().createElement(P.Loading,null):c(nr.buyAction))),0<y&&me().createElement("div",{id:"insufficient-funds-modal"},me().createElement(Jt,{robuxNeeded:y})),me().createElement("div",{id:"multi-item-purchase-modal"},me().createElement(er,{title:c(nr.buyNowAction),expectedTotalPrice:d+m,items:r,itemDetails:n,resaleItems:p,currentRobuxBalance:t,onCancel:function(){var e;null==tr||null!==(e=tr.close)&&void 0!==e&&e.call(tr),s()},onTransactionComplete:function(e){b(!1),o(e)},onAction:function(){var e;null==tr||null!==(e=tr.close)&&void 0!==e&&e.call(tr),b(!0),i()},loading:!1,systemFeedbackService:l})))}ar.propTypes={currentUserBalance:i().number.isRequired,items:i().arrayOf(i().shape({id:i().number.isRequired,itemType:i().string.isRequired})).isRequired,itemDetails:i().arrayOf(i().shape({productId:i().number.isRequired,price:i().number.isRequired,itemName:i().string.isRequired,itemType:i().string.isRequired,assetTypeDisplayName:i().string.isRequired,sellerName:i().string.isRequired,expectedSellerId:i().number.isRequired,isPurchasable:i().bool.isRequired,isOwned:i().bool.isRequired,isPlugin:i().bool.isRequired,itemDetailItemId:i().number.isRequired,loading:i().bool.isRequired,loadFailure:i().bool,userQualifiesForPremiumPrices:i().bool.isRequired,premiumPriceInRobux:i().number,isAuthenticated:i().bool.isRequired,resellerAvailable:i().bool.isRequired,firstReseller:i().shape({seller:{name:i().string.isRequired,id:i().number.isRequired},userAssetId:i().number.isRequired}),isMarketPlaceEnabled:i().bool.isRequired})).isRequired,onBuyButtonClick:i().func.isRequired,onConfirm:i().func.isRequired,onCancel:i().func.isRequired,onTransactionComplete:i().func.isRequired,systemFeedbackService:i().func.isRequired,translate:i().func.isRequired};var ir=(0,s.withTranslations)(ar,o.purchasingResources);function sr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,a=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return or(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return or(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function or(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function lr(e){var t=e.items,r=e.onBuyButtonClick,n=e.systemFeedbackService,a=e.onConfirm,i=e.onCancel,s=e.onTransactionComplete,o=e.translate,l=sr((0,de.useState)(void 0),2),e=l[0],c=l[1];(0,de.useEffect)(function(){Ue.authenticatedUser.isAuthenticated&&he(Ue.authenticatedUser.id).then(function(e){c(e.data.robux)}).catch(function(){c(void 0)})},[]);l=Lt(t).itemDetails;return me().createElement(ir,{currentUserBalance:e,items:t,itemDetails:l,systemFeedbackService:n,onBuyButtonClick:r,onConfirm:a,onCancel:i,onTransactionComplete:s,translate:o})}lr.propTypes={items:i().arrayOf(i().object).isRequired,onBuyButtonClick:i().func,onConfirm:i().func,onCancel:i().func,onTransactionComplete:i().func,systemFeedbackService:i().func.isRequired,translate:i().func.isRequired},lr.defaultProps={onBuyButtonClick:function(){},onConfirm:function(){},onCancel:function(){},onTransactionComplete:function(){}},Rt=(0,s.withTranslations)(lr,o.purchasingResources),Zt=a.errorTypeIds,window.RobloxItemPurchase={createTransactionFailureModal:u,createInsufficientFundsModal:E,createPriceChangedModal:B,createPurchaseVerificationModal:j,createPurchaseConfirmationModal:ye,createItemPurchase:Oe,errorTypeIds:Zt,getMetaData:be,BalanceAfterSaleText:C,PriceLabel:T,AssetName:U,TransactionVerb:H,BatchBuyPriceContainer:Rt},(0,pe.ready)(function(){var e=document.getElementById("display-price-container");e&&(0,t.render)(me().createElement(vt,null),e)})}();
//# sourceMappingURL=https://js.rbxcdn.com/310ea8df041da690c755f63ef2616561-itemPurchase.bundle.min.js.map

/* Bundle detector */
window.Roblox && window.Roblox.BundleDetector && window.Roblox.BundleDetector.bundleDetected("ItemPurchase");