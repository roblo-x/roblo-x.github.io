!function(){"use strict";function c(){return{retryable:!0,withCredentials:!0,url:"".concat(oe,"/v1/email")}}var r={n:function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},d:function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},l=CoreUtilities,M=React,R=r.n(M),i=ReactDOM,m=Roblox,e=r.n(m),t=PropTypes,n=r.n(t),o=ReactUtilities,a="verificationUpsell-container",s={common:[],feature:"Feature.VerificationUpsell"},u="SET_USER_EMAIL_STATES",d="SET_MODAL_STATES",p="SET_PAGENAME_STATE",f="SET_INPUT_STATE",v="SET_ERROR_STATE",y="SET_EMAIL_SENT_STATE",h="SET_RESEND_EMAIL_STATE",b="SET_EMAIL_UPDATING_STATE",g="SET_TRIGGER_ORIGIN",E="SET_INPUT_CLEAR",P="SET_EMAIL_ADDED_STATE",S="Verification",x="UpdateEmail",N="UpdatePassword",C="logout",w="buyRobuxPage",A="homepage",O="premiumSubscriptionPage",T="purchaseWarning",k="notApprovedPage",I="https://en.help.roblox.com/hc/articles/115004630823-Roblox-Privacy-and-Cookie-Policy",D="Enter",j="Action.ChangeEmail",U="Action.ResendConfirmationEmail",_="Action.SendConfirmationEmail",L="Action.Logout",B="Action.GenericSkip",H="Action.Continue",q="Action.PrivacyPolicy",V="Description.PleaseEnterEmail",F="Description.PleaseEnterParentEmail",G="Description.AddEmailTextOver13",W="Description.AddEmailTextUnder13",z="Description.LogoutAddEmailTextOver13",$="Description.LogoutAddEmailTextUnder13",Y="Description.VerifyEmailBody",K="Heading.PleaseAddEmail",X="Heading.AddEmail",J="Heading.VerifyEmail",Q="Heading.VerifyOnLogout",Z="Label.EmailInputPlaceholderOver13",ee="Label.EmailInputPlaceholderUnder13",te="Message.ConfirmationEmailNotSent",ne="Message.InvalidEmailAddress",re="Response.ErrorTryAgain",ie="Response.TooManyAttemptsTryAgainLater",oe=m.EnvironmentUrls.accountSettingsApi,ae=m.EnvironmentUrls.authApi,ce=m.EnvironmentUrls.apiGatewayUrl,le=m.EnvironmentUrls.accountInformationApi,se={header:"alt_title",body:"alt_body",primaryButton:"alt_primary_button_text",secondaryButton:"alt_secondary_button_text"};function ue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return de(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return de(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function de(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pe(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function me(r){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?pe(Object(i),!0).forEach(function(e){var t,n;t=r,e=i[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):pe(Object(i)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(i,e))})}return r}function fe(e,t){switch(t.type){case E:return me(me({},e),{},{userEmailInput:""});case g:return me(me({},e),{},{origin:t.origin,skipCallback:t.skipCallback,closeCallback:t.closeCallback});case u:return me(me({},e),{},{isEmailVerified:t.isEmailVerified,userEmail:t.userEmail});case p:return me(me({},e),{},{pageName:t.pageName});case v:return me(me({},e),{},{errorMsg:t.errorMsg});case b:return me(me({},e),{},{isEmailUpdating:t.isEmailUpdating});case y:return me(me({},e),{},{isEmailSent:!0});case P:return me(me({},e),{},{isEmailAdded:!0});case h:return me(me({},e),{},{isEmailSent:!1});case f:return e.pageName===x?me(me({},e),{},{userEmailInput:t.value,errorMsg:""}):e;case d:if(e.pageName!==x)return me(me({},e),{},{pageName:S,titleText:Ae,bodyText:Se,primaryButtonText:he,secondaryButtonText:be,errorMsg:""});var n,r,i,o=m.CurrentUser&&!m.CurrentUser.isUnder13,a=ye,c="";switch(e.skipCallback&&(c=Ee),e.origin){case C:r=ke,i=o?Ce:we,c=ge,t.experimentParameters&&(r=null!==(n=t.experimentParameters[se.header])&&void 0!==n?n:r,i=null!==(n=t.experimentParameters[se.body])&&void 0!==n?n:i,a=null!==(n=t.experimentParameters[se.primaryButton])&&void 0!==n?n:a,c=null!==(n=t.experimentParameters[se.secondaryButton])&&void 0!==n?n:c);break;case A:case k:r=Te,i=o?Ie:De,a=Pe;break;default:r=Oe,i=o?xe:Ne}return me(me({},e),{},{pageName:x,titleText:r,bodyText:i,primaryButtonText:a,secondaryButtonText:c,errorMsg:"",userEmailInputPlaceholder:o?Me:Re});default:return e}}function ve(e){var t=e.children,e=(n=ue((0,M.useReducer)(fe,je),2))[0],n=n[1];return R().createElement(Ue.Provider,{value:{emailUpsellState:e,dispatch:n}},t)}var ye=_,he=U,be=j,ge=L,Ee=B,Pe=H,Se=Y,xe=G,Ne=W,Ce=z,we=$,Ae=J,Oe=X,Te=K,ke=Q,Me=Z,Re=ee,Ie=V,De=F,je={pageName:"",isModalOpen:!1,isEmailVerified:!1,isEmailSent:!1,isEmailUpdating:!1,isEmailAdded:!1,origin:"",experimentParameters:null,userEmail:"",userEmailInput:"",userEmailInputPlaceholder:Me,errorMsg:"",titleText:Ae,bodyText:Se,primaryButtonText:he,secondaryButtonText:be,skipCallback:null,closeCallback:null},Ue=(0,M.createContext)(je);function _e(){return(0,M.useContext)(Ue)}ve.propTypes={children:n().node.isRequired};var Le=ReactStyleGuide,Be=HeaderScripts,He=(!!m.DeviceMeta&&(0,m.DeviceMeta)()).isAndroidApp;function qe(e){var t=e.show,n=e.onHide,r=e.onPrimaryAction,i=e.onSecondaryAction,o=e.onInputChange,a=e.onBackAction,c=e.onInputFocus,l=e.onKeyDown,s=e.translate,u=_e().emailUpsellState,d=u.pageName,p=u.titleText,m=u.bodyText,f=u.primaryButtonText,v=u.secondaryButtonText,y=u.userEmailInput,h=u.userEmailInputPlaceholder,b=u.userEmail,g=u.errorMsg,E=u.isEmailSent,e=u.isEmailUpdating,u=null===Be.authenticatedUser||void 0===Be.authenticatedUser?void 0:Be.authenticatedUser.isUnder13;return R().createElement(Le.Modal,{show:t,onHide:n,className:"".concat(He?"verification-android-modal":""," verification-modal"),size:"lg","aria-labelledby":"contained-modal-title-vcenter",scrollable:"true",centered:"true"},R().createElement(Le.Modal.Header,{useBaseBootstrapComponent:!0},R().createElement("div",{className:"verification-upsell-title-container"},d===N?R().createElement("button",{type:"button",className:"verification-upsell-title-button",onClick:a},R().createElement("span",{className:"icon-back"})):R().createElement("button",{type:"button",className:"verification-upsell-title-button",onClick:n},R().createElement("span",{className:"close icon-close"})),R().createElement(Le.Modal.Title,{id:"contained-modal-title-vcenter"},s(p)))),R().createElement(Le.Modal.Body,null,R().createElement("div",{className:"email-verification-upsell-image"}),R().createElement("p",{className:"verification-upsell-text-body"},s(m,{emailAddress:b})),d===x&&R().createElement("input",{type:"email",autoFocus:!0,className:"".concat(g?"input-field-error":""," form-control input-field verification-upsell-modal-input"),placeholder:s(h),autoComplete:"email",value:y,onChange:function(e){return o(e.target.value)},onFocus:function(){return c()},onKeyDown:function(e){return l(e.key)}}),g&&R().createElement("p",{className:"text-error modal-error-message sms-code-error"},s(g)),d===x&&u&&R().createElement("div",{className:"privacy-policy-button"},R().createElement("a",{href:I,target:"_blank",rel:"noreferrer"},s(q)))),R().createElement(Le.Modal.Footer,null,R().createElement("div",{className:"verification-upsell-footer-container"},d!==S&&R().createElement(Le.Button,{className:"modal-button verification-upsell-btn",variant:Le.Button.variants.cta,size:Le.Button.sizes.medium,isDisabled:e,onClick:r},s(f)),d===S&&R().createElement("button",{type:"button",className:"".concat(E?"resend-button-disabled":""," resend-verification-email-button"),disabled:E||g,onClick:r},s(f)),v&&R().createElement("button",{type:"button",className:"change-email-button",onClick:i},s(v)))))}function Ve(e){var t=null==e||null===(t=e.data)||void 0===t?void 0:t.errors;return t&&t[0]&&t[0].code}qe.propTypes={translate:n().func.isRequired,onHide:n().func.isRequired,show:n().bool.isRequired,onPrimaryAction:n().func.isRequired,onSecondaryAction:n().func.isRequired,onInputChange:n().func.isRequired,onKeyDown:n().func.isRequired,onBackAction:n().func.isRequired,onInputFocus:n().func.isRequired};var Fe=qe,Ge="addEmail",We="verifyEmail",ze="addPhone",$e="verifyPhone",Ye="phoneAdded",Ke="discoverabilityConsent",Xe="unset",Je="homepage";function Qe(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,i)}function Ze(c){return function(){var e=this,a=arguments;return new Promise(function(t,n){var r=c.apply(e,a);function i(e){Qe(r,t,n,i,o,"next",e)}function o(e){Qe(r,t,n,i,o,"throw",e)}i(void 0)})}}function et(){var e={retryable:!0,withCredentials:!0,url:"".concat(oe,"/v1/email/verify")};return l.httpService.post(e).then(function(){return!0},Ve)}function tt(n){var e=c();return l.httpService.get(e).then(function(e){var t=e.data;return null!=t&&t.emailAddress&&(!n.requireVerification||t.verified)||(e=new CustomEvent("OpenVerificationModal",{detail:{isEmailVerified:t.verified,email:null==t?void 0:t.emailAddress,skipCallback:n.skipCallback,origin:n.origin,experimentParameters:null==n?void 0:n.experimentParameters,requireVerification:n.requireVerification,closeCallback:n.closeCallback}}),window.dispatchEvent(e)),t},function(e){return console.log(e),!1})}function nt(e){return tt({origin:A,closeCallback:e})}function rt(e){switch(e){case S:return We;case x:return Ge;default:return""}}var it=function(){var e=Ze(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={retryable:!0,withCredentials:!0,url:"".concat(ae,"/v2/metadata")},e.abrupt("return",l.httpService.get(t));case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),ot=function(){var e=Ze(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={retryable:!0,withCredentials:!0,url:"".concat(ce,"/product-experimentation-platform/v1/projects/1/layers/Website.Logout.ContactMethodModal/values")},n={parameters:Object.values(se).join(",")},e.abrupt("return",l.httpService.get(t,n));case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),at=function(){var e=Ze(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,it();case 2:if(n=e.sent,null!==(n=n.data)&&void 0!==n&&n.IsEmailUpsellAtLogoutEnabled){e.next=5;break}return e.abrupt("return",!1);case 5:return r={},e.prev=6,e.next=9,ot();case 9:r=e.sent,e.next=14;break;case 12:e.prev=12,e.t0=e.catch(6);case 14:return e.abrupt("return",tt({origin:C,experimentParameters:null===(n=r)||void 0===n?void 0:n.data,skipCallback:t}));case 16:case"end":return e.stop()}},e,null,[[6,12]])}));return function(){return e.apply(this,arguments)}}(),ct=ne,lt=ie,st=re,ut=Un=9,dt=6,pt=CoreRobloxUtilities;function mt(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function ft(r){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?mt(Object(i),!0).forEach(function(e){var t,n;t=r,e=i[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):mt(Object(i)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(i,e))})}return r}function vt(e,t){pt.eventStreamService.sendEventWithTarget(e.type,e.context,ft(ft({},e.params),{},{origin:t.origin,section:t.section}))}function yt(e,t){return(e=ft({},e)).params=ft(ft({},e.params),{},{errorCode:t}),e}var ht=pt.eventStreamService.eventTypes,bt="verificationUpsell",gt={showModal:{name:"showModal",type:ht.modalAction,context:bt,params:{aType:"shown"}},dismissModal:{name:"dismissModal",type:ht.modalAction,context:bt,params:{aType:"dismissed"}},touchEmail:{name:"touchEmail",type:ht.formInteraction,context:bt,params:{aType:"focus",field:"email"}},showError:{name:"showError",type:ht.formInteraction,context:bt,params:{aType:"shown",field:"errorMessage"}},clickContinue:{name:"clickContinue",type:ht.formInteraction,context:bt,params:{btn:"continue"}},clickSendConfirmationEmail:{name:"clickSendConfirmationEmail",type:ht.formInteraction,context:bt,params:{aType:"click",btn:"sendConfirmation"}},clickResendConfirmationEmail:{name:"clickResendConfirmationEmail",type:ht.formInteraction,context:bt,params:{aType:"click",btn:"resendConfirmation"}},clickChangeEmail:{name:"clickChangeEmail",type:ht.formInteraction,context:bt,params:{aType:"click",btn:"changeEmail"}},skipLogoutAnyway:{name:"skipLogoutAnyway",type:ht.formInteraction,context:bt,params:{aType:"click",btn:"skipLogoutAnyway"}},skipPrepurchaseVerification:{name:"skipPrepurchaseVerification",type:ht.formInteraction,context:bt,params:{aType:"click",btn:"skipPrepurchaseVerification"}}};function Et(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Pt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var St=te,xt=ne,Nt=Un;function Ct(e){var t=e.translate,n=Et((0,M.useState)(!1),2),e=n[0],r=n[1],n=_e(),i=n.emailUpsellState,o=n.dispatch;function a(){var e,t,r=rt(i.pageName);switch(i.pageName){case S:vt(gt.clickResendConfirmationEmail,{origin:i.origin,section:r}),et().then(function(e){!0!==e?(o({type:v,errorMsg:St}),e=yt(gt.showError,e),vt(e,{origin:i.origin,section:r})):(o({type:y}),setTimeout(function(){o({type:h})},15e3))});break;case x:vt(gt.clickContinue,{origin:i.origin,section:r}),t=i.userEmailInput,/\S+@\S+\.\S+/.test(t)?(vt(gt.clickSendConfirmationEmail,{origin:i.origin,section:r}),o({type:b,isEmailUpdating:!0}),e={emailAddress:i.userEmailInput},t=c(),l.httpService.post(t,e).then(function(){return!0},Ve).then(function(e){var t,n;!0!==e?(n=function(e){switch(e){case dt:return lt;case ut:return ct;default:return st}}(e),t=yt(gt.showError,e),vt(t,{origin:i.origin,section:r}),o({type:v,errorMsg:n}),o({type:b,isEmailUpdating:!1})):(o({type:u,isEmailVerified:!1,userEmail:(e=i.userEmailInput,t=e.indexOf("@"),n=e.substring(0,1),"".concat(n,"*****").concat(e.substring(t)))}),o({type:E}),o({type:p,pageName:S}),o({type:d}),o({type:b,isEmailUpdating:!1}),o({type:P}))}),o({type:d})):(e=yt(gt.showError,Nt),vt(e,{origin:i.origin,section:r}),o({type:v,errorMsg:xt}))}}return(0,M.useEffect)(function(){i.pageName&&vt(gt.showModal,{origin:i.origin,section:rt(i.pageName)})},[i.pageName]),(0,M.useEffect)(function(){window.addEventListener("OpenVerificationModal",function(e){r(!0),o({type:g,origin:e.detail.origin,skipCallback:e.detail.skipCallback,closeCallback:e.detail.closeCallback}),o({type:u,isEmailVerified:e.detail.isEmailVerified,userEmail:e.detail.email});var t=e.detail.requireVerification&&e.detail.email?S:x;o({type:p,pageName:t}),o({type:d,experimentParameters:null===(e=e.detail)||void 0===e?void 0:e.experimentParameters})},!1)},[]),R().createElement("div",null,R().createElement(Fe,{show:e,onHide:function(){return vt(gt.dismissModal,{origin:i.origin,section:rt(i.pageName)}),o({type:E}),i.closeCallback&&i.closeCallback(i.isEmailAdded),void r(!1)},onPrimaryAction:a,onSecondaryAction:function(){var e=rt(i.pageName);switch(i.pageName){case S:vt(gt.clickChangeEmail,{origin:i.origin,section:e}),o({type:p,pageName:x}),o({type:d});break;case x:i.skipCallback&&(vt(i.origin===C?gt.skipLogoutAnyway:gt.skipPrepurchaseVerification,{origin:i.origin,section:e}),i.skipCallback()),o({type:E}),r(!1)}},onInputFocus:function(){vt(gt.touchEmail,{origin:i.origin,section:rt(i.pageName)})},onInputChange:function(e){o({type:f,pageName:x,value:e})},onKeyDown:function(e){return e===D&&a()},onBackAction:function(){return o({type:p,pageName:x}),void o({type:d})},translate:t}))}Ct.propTypes={translate:n().func.isRequired};var wt=Ct;function At(e){e=e.translate;return R().createElement(ve,null,R().createElement(wt,{translate:e}))}At.propTypes={translate:n().func.isRequired};var Ot=(0,o.withTranslations)(At,s),Tt="CLOSE_PHONE_NUMBER_MODAL",kt="SET_ERROR_MESSAGE",Mt="SET_PHONE_NUMBER",Rt="SET_COUNTRY",It="SET_PAGE",Dt="SET_PHONE_VERIFICATION_STATUS",jt="SET_PREFIX_OPTIONS_LIST",Ut="SET_LOGGING_VALUES",_t="SET_DISCOVERABILITY_CONSENT_PREFILL",Lt="Action.Done",Bt="Action.Continue",Ht="Action.AddPhoneNumber",qt="Action.ChangePhoneNumber",Vt="Action.ResendCode",Ft="Action.CodeResent",Gt="Heading.VerifyYourPhone",Wt="Label.EnterCode",zt="Label.PhoneNumber",$t="Heading.VerificationCode",t="Message.InvalidSmsCode",_="Description.VerificationCodeSmsFeesMayApply",U="Description.PhoneNumberNeverPublic",j="Description.ShortCodeLegalDisclaimer",Yt="Heading.PhoneIsVerified",Kt="Description.PhoneForRecovery",L="Response.PhoneNumberAlreadyLinked",B="Response.TooManyVerificationAttempts",H="Response.PhoneHasTooManyAssociatedAccounts",Y="Response.ErrorPhoneFormatInvalid",G="Response.InvalidPhoneNumberError",W="Response.ErrorTryAgain",z="Label.Dialog.EditPhoneCurrentNumber",$="Description.Dialog.EditPhoneWarning",J="Action.Dialog.EditPhonePrimary",X="Action.Dialog.EditPhoneSecondary",Xt="Heading.Dialog.RemovePhone",Jt="Action.Dialog.RemovePhonePrimary",Qt="Action.Dialog.RemovePhoneSecondary",Zt="Description.Dialog.RemovePhoneWarning",K='<a href="https://en.help.roblox.com/hc/articles/9483830673556-Roblox-SMS-Terms-of-Service">',Q='<a href="https://en.help.roblox.com/hc/articles/115004630823">',Z="</a>",en="Action.Done",tn="Action.LearnMore",nn="Description.CanUsePhoneForRecovery",rn="Description.PhoneDiscoverabilityPrivacy",on="Description.WantToBeRecommendedViaPhone",an="Header.LetFriendsFindYou",cn="Header.PhoneIsVerified",ln="Label.No",sn="Label.Yes",un="Response.ErrorTryAgain",dn="Heading.VerificationRequired",pn="Heading.DontGetLockedOut",mn="Label.RecoverIfPasswordLost",fn="Heading.ImproveAccountSecurity",vn="Label.KeepBadActorsOut",yn="Action.AddPhoneNumber",hn="Action.AddEmailAddress",bn="Action.LogOutText",gn="Action.Support",ee="US",En=function(e){return"+".concat(e)},Pn=function(e,t){return"".concat(e," +(").concat(t,")")},Sn=function(e,t){return"\n+".concat(e).concat(t)},xn="Enter",Nn=" (",Cn=")",wn=6,An=10,On="US",V=2,F=3,ie=6,re=8,ht=9,bt=7,te=6,Tn="upsell-phone-number-number",kn="verification-code-input",Mn="ADD_PHONE_NUMBER_PAGE",Rn="VERIFY_PHONE_NUMBER_PAGE",In="ADD_PHONE_SUCCESS_PAGE",Dn="DELETE_PHONE_CONFIRM_PAGE",jn="PHONE_DISCOVERABILITY_CONSENT_PAGE",ne=pt.eventStreamService.eventTypes,Un="verificationUpsell",_n={phoneNumberModalDismissed:{name:"phoneNumberModalDismissed",type:ne.modalAction,context:Un,params:{aType:"dismissed"}},phoneNumberModalShown:{name:"phoneNumberModalShown",type:ne.modalAction,context:Un,params:{aType:"shown"}},phoneNumberModalErrorShown:{name:"phoneNumberModalErrorShown",type:ne.modalAction,context:Un,params:{aType:"shown",field:"errorMessage"}},addPhonePrefixPressed:{name:"addPhonePrefixPressed",type:ne.formInteraction,context:Un,params:{aType:"focus",field:"countryPrefix"}},addPhonePhoneNumberPressed:{name:"addPhonePhoneNumberPressed",type:ne.formInteraction,context:Un,params:{aType:"focus",field:"phoneNumber"}},addPhoneContinuePressed:{name:"addPhoneContinuePressed",type:ne.formInteraction,context:Un,params:{btn:"continue"}},verifyPhoneChangePhoneNumberPressed:{name:"verifyPhoneChangePhoneNumberPressed",type:ne.formInteraction,context:Un,params:{btn:"changePhoneNumber"}},verifyPhoneCodeFieldPressed:{name:"verifyPhoneCodeFieldPressed",type:ne.formInteraction,context:Un,params:{aType:"focus",field:"verificationCode"}},verifyPhoneContinuePressed:{name:"verifyPhoneContinuePressed",type:ne.formInteraction,context:Un,params:{btn:"continue"}},verifyPhoneResendPressed:{name:"verifyPhoneResendPressed",type:ne.formInteraction,context:Un,params:{btn:"resendCode"}},phoneAddedDonePressed:{name:"phoneAddedDonePressed",type:ne.formInteraction,context:Un,params:{btn:"done"}}};function Ln(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Bn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Hn(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function qn(r){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Hn(Object(i),!0).forEach(function(e){var t,n;t=r,e=i[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):Hn(Object(i)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(i,e))})}return r}function Vn(e,t){var n;switch(t.type){case Mt:return qn(qn({},e),{},{phone:t.phone,errorMessage:""});case Rt:return qn(qn({},e),{},{phonePrefixPickerIndex:t.phonePrefixPickerIndex,errorMessage:""});case kt:return qn(qn({},e),{},{errorMessage:t.errorMessage});case It:return qn(qn({},e),{},{errorMessage:"",pageName:t.pageName});case Dt:return qn(qn({},e),{},{isPhoneVerified:t.isPhoneVerified});case _t:return qn(qn({},e),{},{shouldPrefillAffirmativeDiscoverabilityConsent:null!==(n=null==t?void 0:t.shouldPrefillAffirmativeDiscoverabilityConsent)&&void 0!==n&&n});case jt:return qn(qn({},e),{},{phonePrefixOptionsList:t.phonePrefixOptionsList});case Ut:return qn(qn({},e),{},{origin:t.origin});case Tt:return qn(qn({},Gn),{},{isOpen:!1,errorMessage:""});default:return Gn}}function Fn(e){var t=e.children,e=(n=Ln((0,M.useReducer)(Vn,Gn),2))[0],n=n[1];return R().createElement(Wn.Provider,{value:{phoneUpsellState:e,dispatch:n}},t)}var Gn={isOpen:!0,pageName:Mn,errorMessage:"",origin:Xe,phone:"",isPhoneVerified:!1,phonePrefixPickerIndex:0,phonePrefixOptionsList:[],shouldDiscoverabilityConsentDefaultYes:!1},Wn=(0,M.createContext)(Gn);function zn(){return(0,M.useContext)(Wn)}function $n(){var e={retryable:!0,withCredentials:!0,url:"".concat(ce,"/phone-number-api/v1/phone-prefix-list")};return l.httpService.get(e).then(function(e){var t,n=e.data,e=n.find(function(e){return!0===e.isDefault}),r=null!==(e=null==e?void 0:e.code)&&void 0!==e?e:er;return n.filter(function(e){return e.code!==r||(t=e,!1)}),t&&n.unshift(t),n},function(e){return!1})}function Yn(e){var t=e.phone,n=e.prefix,r=e.countryCode,e={retryable:!0,withCredentials:!0,url:"".concat(le,"/v1/phone")},t={countryCode:r,prefix:n,phone:t};return l.httpService.post(e,t)}function Kn(e){var t={code:0<arguments.length&&void 0!==e?e:""},e={retryable:!0,withCredentials:!0,url:"".concat(le,"/v1/phone/verify")};return l.httpService.post(e,t)}function Xn(e){var t={retryable:!0,withCredentials:!0,url:"".concat(le,"/v1/phone/resend")},e=(e=e)||{};return l.httpService.post(t,e).then(function(e){e.data;return!0},function(e){return!1})}function Jn(){var e={retryable:!0,withCredentials:!0,url:"".concat(le,"/v1/phone/delete")};return l.httpService.post(e,{})}function Qn(e){switch(e){case lr:return tr;case sr:return nr;case dr:return rr;case pr:return ir;case ur:return ar;default:return or}}function Zn(e){switch(e){case Mn:return ze;case Rn:return $e;case In:return Ye;case jn:return Ke;default:return""}}Fn.propTypes={children:n().node.isRequired};var er=ee,tr=L,nr=B,rr=Y,ir=G,or=W,ar=H,cr=t,lr=F,sr=ie,ur=ht,dr=V,pr=re,mr=bt,fr=te;function vr(e){var t=e.translate,e=zn().phoneUpsellState;return R().createElement("p",{className:"input-field-error-text sms-code-error text-error modal-error-message"},e.errorMessage?t(e.errorMessage):null)}vr.propTypes={translate:n().func.isRequired};var yr=vr;function hr(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,i)}function br(e){var t=e.translate,n=zn(),r=n.phoneUpsellState,i=n.dispatch,o=En,a=Pn,c=r.phone,e=r.phonePrefixPickerIndex,l=r.phonePrefixOptionsList,n=r.pageName,s=r.origin,r=Tn,u=Zn(n);(0,M.useEffect)(function(){function e(){var c;return c=regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0===(t=l).length)return e.next=4,$n();e.next=6;break;case 4:t=e.sent,i({type:jt,phonePrefixOptionsList:t});case 6:case"end":return e.stop()}},e)}),(e=function(){var e=this,a=arguments;return new Promise(function(t,n){var r=c.apply(e,a);function i(e){hr(r,t,n,i,o,"next",e)}function o(e){hr(r,t,n,i,o,"throw",e)}i(void 0)})}).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[]);var d=null!==(d=null==l||null===(d=l[e])||void 0===d?void 0:d.prefix)&&void 0!==d?d:"";return R().createElement("div",null,R().createElement("label",{htmlFor:r},R().createElement("p",{className:"verification-code-label font-caption-header text-primary"},t(zt))),R().createElement("div",{id:"upsell-phone",className:"phone-number-input-container input-field form-control"},R().createElement("div",{id:"upsell-phonenumber",className:"phone-input-row"},R().createElement("span",{className:"phone-prefix-wrapper"},R().createElement("div",{className:"phone-prefix-selected text"},o(d)),R().createElement("select",{className:"phone-prefix-dropdown input-field rbx-select",onChange:function(e){e=e.target.value;i({type:Rt,phonePrefixPickerIndex:e})},onFocus:function(){vt(_n.addPhonePrefixPressed,{origin:s,section:u})},value:e},l.map(function(e,t){return R().createElement("option",{className:"prefix-option",value:t},a(e.localizedName,e.prefix))}))),R().createElement("div",{id:"upsell-phonenumber-divider",className:"phone-divider"}),R().createElement("input",{id:r,type:"tel",value:c,className:"phone-input form-control",placeholder:t(zt),autoComplete:"tel-national",onChange:function(e){return i({type:Mt,phone:e.target.value})},onFocus:function(){vt(_n.addPhonePhoneNumberPressed,{origin:s,section:u})}}))))}br.propTypes={translate:n().func.isRequired};var gr=br;function Er(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,i)}function Pr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Sr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Sr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var xr=Ht,Nr=Bt,Cr=_,wr=U,Ar=j,Or=z,Tr=$,kr=J,Mr=X,Rr=Z,Ir=Q,Dr=K;function jr(e){var t=e.translate,n=e.onHide,r=e.existingPhoneNumber,i=zn(),o=i.phoneUpsellState,a=i.dispatch,l=o.phone,s=o.phonePrefixPickerIndex,u=o.phonePrefixOptionsList,c=o.pageName,d=o.origin,e=Pr((0,M.useState)(!1),2),i=e[0],p=e[1],o=Pr((0,M.useState)(!1),2),e=o[0],m=o[1],f=Zn(c);(0,M.useEffect)(function(){var e=null==u||null===(e=u[s])||void 0===e?void 0:e.code;m(e!==On)},[u,s]);var c=t(Ar,{linkTagWithSmsTos:Dr,linkTagWithPrivacyPolicy:Ir,linkTagEnd:Rr}),v=function(){var c,e=(c=regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),n=u[s],t=n.prefix,n=n.code,vt(_n.addPhoneContinuePressed,{origin:d,section:f}),e.next=5,Yn({phone:l,prefix:t,countryCode:n}).then(function(){a({type:It,pageName:Rn})}).catch(function(e){var t=Ve(e),e=yt(_n.phoneNumberModalErrorShown,t);vt(e,{origin:d,section:f}),a({type:kt,errorMessage:Qn(t)})}).finally(function(){p(!1)});case 5:case"end":return e.stop()}},e)}),function(){var e=this,a=arguments;return new Promise(function(t,n){var r=c.apply(e,a);function i(e){Er(r,t,n,i,o,"next",e)}function o(e){Er(r,t,n,i,o,"throw",e)}i(void 0)})});return function(){return e.apply(this,arguments)}}();return R().createElement("div",null,R().createElement(Le.Modal.Header,{useBaseBootstrapComponent:!0},R().createElement("div",{className:"verification-upsell-title-container"},R().createElement("button",{type:"button",className:"verification-upsell-title-button",onClick:n},R().createElement("span",{className:"close icon-close"})),R().createElement(Le.Modal.Title,{id:"contained-modal-title-vcenter"},t(r?kr:xr)))),R().createElement(Le.Modal.Body,null,R().createElement("div",{className:"phone-number-submission-container"},R().createElement("div",{className:"verification-upsell-text-body text-description"},t(Cr)),r&&R().createElement(R().Fragment,null,R().createElement("div",{className:"verification-upsell-text-body text-description"},t(Or)," ",r),R().createElement("div",{className:"border-warning two-step-warning"},R().createElement("span",{className:"icon-warning-orange"}),R().createElement("span",{className:"small text-warning form-warning-text"},t(Tr)))),R().createElement(gr,{translate:t}),R().createElement("div",{className:"phone-verification-nonpublic-text text-description font-caption-body"},t(wr)),R().createElement(yr,{translate:t}))),R().createElement(Le.Modal.Footer,null,R().createElement("div",{className:"text-description font-caption-body phone-verification-legal-text",hidden:e,dangerouslySetInnerHTML:{__html:c}}),R().createElement("div",{className:"buttons-section"},R().createElement(Le.Button,{type:"button",id:"add-phone-number-continue-button",className:"accept-btn",variant:Le.Button.variants.primary,isDisabled:i||0===l.length,onClick:function(){return v()}},t(Nr))),R().createElement("div",null,r&&R().createElement("span",{className:"text-report remove-phone-label",onClick:function(){return a({type:It,pageName:Dn})},onKeyDown:function(){return a({type:It,pageName:Dn})},role:"button",tabIndex:0},t(Mr)))))}jr.propTypes={translate:n().func.isRequired,onHide:n().func.isRequired,existingPhoneNumber:n().string},jr.defaultProps={existingPhoneNumber:null};var Ur=jr;function _r(e){var t=e.translate,n=e.onHide,r=zn().phoneUpsellState,i=r.origin,o=r.pageName,a=Yt,e=Kt,r=Lt,c=Zn(o);return R().createElement("div",null,R().createElement(Le.Modal.Body,null,R().createElement("div",{className:"phone-number-verification-upsell-image"}),R().createElement("div",{className:"verification-upsell-title-container phone-number-verification-success-page-title page-title"},R().createElement(Le.Modal.Title,{id:"contained-modal-title-vcenter"},t(a))),R().createElement("div",{className:"phone-number-verification-text-body text-description"},t(e))),R().createElement(Le.Modal.Footer,null,R().createElement("button",{type:"button",className:"btn-cta-md btn-max-width phone-number-verify-button",onClick:function(){vt(_n.phoneAddedDonePressed,{origin:i,section:c}),n()}},t(r))))}function Lr(){var e={retryable:!0,withCredentials:!0,url:"".concat(ce,"/user-settings-api/v1/user-settings/metadata")};return l.httpService.get(e).then(function(e){return e.data},function(e){return null})}function Br(e){var t={retryable:!0,withCredentials:!0,url:"".concat(ce,"/user-settings-api/v1/user-settings")},e={phoneNumberDiscoverability:e};return l.httpService.post(t,e).then(function(e){return!0}).catch(function(){return!1})}_r.propTypes={translate:n().func.isRequired,onHide:n().func.isRequired};var Hr=_r,qr="Unset",Vr="NotDiscoverable",Fr="Discoverable",Gr="discoverabilityPageLoad",Wr="discoverabilityPageClick",zr="discoverabilityPageRadioButtonClick";function $r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Yr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Kr(e){var t=e.translate,n=e.shouldPrefillAffirmativeDiscoverabilityConsent,r=e.origin,i=e.onHide,o=zn().dispatch,a=en,c=tn,l=nn,s=rn,u=on,d=an,p=cn,m=ln,f=sn,v=un,y=Gr,h=Wr,b=zr,g=$r((0,M.useState)(n?Fr:qr),2),E=g[0],P=g[1],e=$r((0,M.useState)(!1),2),g=e[0],S=e[1],e=function(e){P(e.currentTarget.value),pt.eventStreamService.sendEventWithTarget(b,e.currentTarget.value,{origin:r})};return(0,M.useEffect)(function(){pt.eventStreamService.sendEventWithTarget(y,"phoneVerificationUpsell",{version:n?"non_eu_version":"eu_version",origin:r})},[]),R().createElement("div",{className:"phone-discoverability-consent"},R().createElement(Le.Modal.Body,{className:"verification-grid"},R().createElement("span",{className:"icon-spot-success-xl verification-grid-icon"}),R().createElement("div",{className:"discoverability-text-section"},R().createElement("div",{className:"verification-upsell-title-container page-title "},R().createElement(Le.Modal.Title,null,t(p))),R().createElement("div",{className:"text-description"},t(l))),R().createElement("span",{className:"icon-spot-find-friends-xl verification-grid-icon"}),R().createElement("div",{className:"discoverability-text-section"},R().createElement("div",{className:"verification-upsell-title-container page-title"},R().createElement(Le.Modal.Title,null,t(d))),R().createElement("div",{className:"text-description"},t(u))),R().createElement("div",{className:"verification-grid-icon"}),R().createElement("div",{className:"discoverability-radio-button-section"},R().createElement("div",{className:"radio discoverability-consent-option"},R().createElement("input",{type:"radio",name:"discoverability-options",id:"consent-radio-button",value:Fr,checked:E===Fr,onClick:e}),R().createElement("label",{className:"text-description",htmlFor:"consent-radio-button"},t(f))),R().createElement("div",{className:"radio discoverability-consent-option"},R().createElement("input",{type:"radio",name:"discoverability-options",id:"no-consent-radio-button",value:Vr,checked:E===Vr,onClick:e}),R().createElement("label",{className:"text-description",htmlFor:"no-consent-radio-button"},t(m)))),R().createElement("div",{className:"verification-grid-icon"}),R().createElement("div",null,R().createElement("div",{className:"text-secondary"},t(s)),R().createElement("a",{className:"text-secondary text-link learn-more-link",target:"_blank",rel:"noreferrer",href:"https://en.help.roblox.com/hc/articles/7416652004884"},t(c)))),R().createElement(Le.Modal.Footer,null,R().createElement(yr,{translate:t}),R().createElement("button",{type:"button",className:"btn-cta-md btn-max-width phone-number-verify-button",disabled:g,onClick:function(){S(!0),pt.eventStreamService.sendEventWithTarget(h,E,{origin:r}),Br(E).then(function(e){return!0!==e?(S(!1),void o({type:kt,errorMessage:v})):(o({type:kt,errorMessage:""}),void i())})}},t(a))))}Kr.propTypes={origin:n().string.isRequired,translate:n().func.isRequired,shouldPrefillAffirmativeDiscoverabilityConsent:n().bool.isRequired,onHide:n().func.isRequired};var Xr=Kr;function Jr(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,i)}function Qr(e){return e.replace(/[^0-9]/g,"").substring(0,ei)}var Zr=function(){var c,e=(c=regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(t=In),e.next=4,Lr();case 4:return!0===(null==(r=e.sent)?void 0:r.isDiscoverabilitySettingsEnabled)&&!0===(null==r?void 0:r.showDiscoverabilityUpsells)&&(t=jn,n=!0===(null==r?void 0:r.prefillDiscoverabilitySetting)),e.abrupt("return",{successPage:t,shouldPrefillAffirmativeDiscoverabilityConsent:n});case 7:case"end":return e.stop()}},e)}),function(){var e=this,a=arguments;return new Promise(function(t,n){var r=c.apply(e,a);function i(e){Jr(r,t,n,i,o,"next",e)}function o(e){Jr(r,t,n,i,o,"throw",e)}i(void 0)})});return function(){return e.apply(this,arguments)}}(),ei=wn;function ti(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function ni(r){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ti(Object(i),!0).forEach(function(e){var t,n;t=r,e=i[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):ti(Object(i)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(i,e))})}return r}function ri(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,i)}function ii(c){return function(){var e=this,a=arguments;return new Promise(function(t,n){var r=c.apply(e,a);function i(e){ri(r,t,n,i,o,"next",e)}function o(e){ri(r,t,n,i,o,"throw",e)}i(void 0)})}}function oi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ai(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ai(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ai(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ci(e){var t=e.translate,n=e.onHide,r=zn(),i=r.phoneUpsellState,o=r.dispatch,a=i.phone,c=i.phonePrefixOptionsList,l=i.phonePrefixPickerIndex,s=i.pageName,u=i.origin,d=oi((0,M.useState)({code:"",isReadyToSubmitCode:""}),2),p=d[0],m=d[1],f=Zn(s),v=oi((0,M.useState)(0),2),y=v[0],h=v[1],b=oi((0,M.useState)(!1),2),g=b[0],E=b[1],P=oi((0,M.useState)(In),2),S=P[0],x=P[1],N=Gt,C=qt,w=Bt,e=Vt,r=Ft,d=Wt,s=$t,v=kn,A=xn,O=wn,b=Nn,P=Cn,T=An,a=Sn(c[l].prefix,a);function k(){return(k=ii(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(vt(_n.verifyPhoneContinuePressed,{origin:u,section:f}),p.code.length!==O)return e.abrupt("return");e.next=3;break;case 3:return E(!0),o({type:kt,errorMessage:""}),e.prev=5,e.next=8,Kn(p.code);case 8:o({type:Dt,isPhoneVerified:!0}),o({type:It,pageName:S}),e.next=19;break;case 12:e.prev=12,e.t0=e.catch(5),n=Ve(e.t0),t=function(e){switch(e){case fr:return nr;case mr:return cr;default:return or}}(n),n=yt(_n.phoneNumberModalErrorShown,n),vt(n,{origin:u,section:f}),o({type:kt,errorMessage:t});case 19:return e.prev=19,m(ni(ni({},p),{},{isReadyToSubmitCode:!1})),E(!1),e.finish(19);case 23:case"end":return e.stop()}},e,null,[[5,12,19,23]])}))).apply(this,arguments)}return(0,M.useEffect)(function(){function e(){return(e=ii(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zr();case 2:n=e.sent,t=n.successPage,n=n.shouldPrefillAffirmativeDiscoverabilityConsent,o({type:_t,shouldPrefillAffirmativeDiscoverabilityConsent:n}),x(t);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[]),(0,M.useEffect)(function(){p.isReadyToSubmitCode&&function(){k.apply(this,arguments)}()},[p]),R().createElement("div",null,R().createElement(Le.Modal.Header,{useBaseBootstrapComponent:!0},R().createElement("div",{className:"verification-upsell-title-container"},R().createElement("button",{type:"button",className:"verification-upsell-title-button",onClick:n},R().createElement("span",{className:"close icon-close"})),R().createElement(Le.Modal.Title,{id:"contained-modal-title-vcenter"},t(N)))),R().createElement(Le.Modal.Body,null,R().createElement("div",{className:"phone-number-verification-upsell-image"}),R().createElement("div",{className:"verification-upsell-text-body text-description"},t(d,{phoneNumber:a})),R().createElement("button",{type:"button",className:"phone-number-change-number-button phone-number-text-button",onClick:function(){vt(_n.verifyPhoneChangePhoneNumberPressed,{origin:u,section:f}),o({type:It,pageName:Mn})}},t(C)),R().createElement("label",{htmlFor:v},R().createElement("p",{className:"verification-code-label font-caption-header text-primary"},t(s))),R().createElement("input",{id:v,type:"text",inputMode:"numeric",className:"".concat(i.errorMessage?"input-field-error":""," form-control input-field input-number verification-code-input"),onChange:function(e){return e=e.target.value,o({type:kt,errorMessage:""}),void m(ni(ni({},p),{},{code:Qr(e)}))},onPaste:function(e){e=(e.clipboardData||window.clipboardData).getData("text"),e=Qr(e),m({code:e,isReadyToSubmitCode:!0})},autoComplete:"one-time-code",placeholder:"000000",onKeyDown:function(e){e.key===A&&m(ni(ni({},p),{},{isReadyToSubmitCode:!0}))},onFocus:function(){vt(_n.verifyPhoneCodeFieldPressed,{origin:u,section:f})},value:p.code}),R().createElement(yr,{translate:t})),R().createElement(Le.Modal.Footer,null,R().createElement("button",{type:"button",className:"btn-cta-md btn-max-width phone-number-verify-button",disabled:g||6!==p.code.length,onClick:function(){m(ni(ni({},p),{},{isReadyToSubmitCode:!0}))}},t(w)),0===y?R().createElement("button",{type:"button",className:" btn-secondary-md btn-max-width phone-number-resent-button",onClick:function(){var t;vt(_n.verifyPhoneResendPressed,{origin:u,section:f}),0===y&&(Xn(),0===y&&(t=setInterval(function(){h(function(e){return 1===e&&clearInterval(t),e-1})},1e3)),h(T))}},t(e)):R().createElement("button",{type:"button",className:" btn-secondary-md btn-max-width phone-number-resent-button btn-max-width resend-button-disabled"},t(r),R().createElement("span",null,b+y+P))))}ci.propTypes={translate:n().func.isRequired,onHide:n().func.isRequired};var li=ci;function si(e,t,n,r,i,o,a){try{var c=e[o](a),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,i)}function ui(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return di(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return di(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function di(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pi(e){var t=e.translate,n=e.existingPhoneNumber,r=e.onHide,i=zn().dispatch,o=Xt,a=Zt,c=Jt,l=Qt,s=ui((0,M.useState)(!1),2),e=s[0],u=s[1],s=function(){var c,e=(c=regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.next=3,Jn().then(function(){r()}).catch(function(e){e=Ve(e);i({type:kt,errorMessage:Qn(e)})}).finally(function(){u(!1)});case 3:case"end":return e.stop()}},e)}),function(){var e=this,a=arguments;return new Promise(function(t,n){var r=c.apply(e,a);function i(e){si(r,t,n,i,o,"next",e)}function o(e){si(r,t,n,i,o,"throw",e)}i(void 0)})});return function(){return e.apply(this,arguments)}}(),n=n.match(/\d+$/);return R().createElement("div",null,R().createElement(Le.Modal.Header,{useBaseBootstrapComponent:!0},R().createElement("div",{className:"verification-upsell-title-container"},R().createElement("button",{type:"button",className:"verification-upsell-title-button",onClick:r},R().createElement("span",{className:"close icon-close"})),R().createElement(Le.Modal.Title,{id:"contained-modal-title-vcenter"},t(o)))),R().createElement(Le.Modal.Body,null,R().createElement("div",{className:"phone-number-verification-text-body text-description"},t(a,{phoneLast4:n}))),R().createElement(Le.Modal.Footer,null,R().createElement(yr,{translate:t}),R().createElement(Le.Button,{className:"delete-phone-btn",variant:Le.Button.variants.primary,size:Le.Button.sizes.medium,isLoading:e,onClick:s},t(c)),R().createElement(Le.Button,{variant:Le.Button.variants.secondary,size:Le.Button.sizes.medium,isLoading:e,onClick:r},t(l))))}pi.propTypes={translate:n().func.isRequired,onHide:n().func.isRequired,existingPhoneNumber:n().string},pi.defaultProps={existingPhoneNumber:null};var mi=pi;function fi(e){function t(){vt(_n.phoneNumberModalDismissed,{origin:a.origin,section:l}),r(a.isPhoneVerified),c({type:Tt})}var n=e.translate,r=e.onClose,i=e.origin,o=e.existingPhoneNumber,e=zn(),a=e.phoneUpsellState,c=e.dispatch,l=Zn(a.pageName);return(0,M.useEffect)(function(){a.origin!==Xe&&vt(_n.phoneNumberModalShown,{origin:a.origin,section:l})},[a.pageName,a.origin]),(0,M.useEffect)(function(){c({type:Ut,origin:i})},[]),R().createElement(Le.Modal,{show:a.isOpen,onHide:t,className:"verification-modal",size:"lg","aria-labelledby":"contained-modal-title-vcenter",scrollable:"true",centered:"true"},function(){switch(a.pageName){case Mn:return R().createElement(Ur,{translate:n,onHide:t,existingPhoneNumber:o});case Rn:return R().createElement(li,{translate:n,onHide:t});case In:return R().createElement(Hr,{translate:n,onHide:t});case Dn:return R().createElement(mi,{translate:n,existingPhoneNumber:o,onHide:t});case jn:return R().createElement(Xr,{translate:n,onHide:t,origin:a.origin,shouldPrefillAffirmativeDiscoverabilityConsent:a.shouldPrefillAffirmativeDiscoverabilityConsent});default:return R().createElement(Ur,{translate:n,onHide:t})}}())}fi.propTypes={translate:n().func.isRequired,onClose:n().func.isRequired,origin:n().string,existingPhoneNumber:n().string},fi.defaultProps={origin:Je,existingPhoneNumber:null};var vi=fi;function yi(e){var t=e.translate,n=e.onClose,r=e.origin,e=e.existingPhoneNumber;return R().createElement(Fn,null,R().createElement(vi,{translate:t,onClose:n,origin:r,existingPhoneNumber:e}))}yi.propTypes={translate:n().func.isRequired,origin:n().string,onClose:n().func,existingPhoneNumber:n().string},yi.defaultProps={origin:void 0,onClose:function(){return null},existingPhoneNumber:null};var hi=(0,o.withTranslations)(yi,s),bi="CLOSE_CONTACT_METHOD_PROMPT_MODAL",gi="SET_LOGGING_VALUES";function Ei(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Pi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pi(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Si(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function xi(r){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Si(Object(i),!0).forEach(function(e){var t,n;t=r,e=i[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):Si(Object(i)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(i,e))})}return r}function Ni(e,t){switch(t.type){case bi:return xi(xi({},e),{},{isOpen:!1});case gi:return xi(xi({},e),{},{origin:t.origin,section:t.section});default:return wi}}function Ci(e){var t=e.children,e=(n=Ei((0,M.useReducer)(Ni,wi),2))[0],n=n[1];return R().createElement(Ai.Provider,{value:{contactMethodPromptModalState:e,dispatch:n}},t)}var wi={isOpen:!0,origin:"",section:""},Ai=(0,M.createContext)(wi);Ci.propTypes={children:n().node.isRequired};var K=pt.eventStreamService.eventTypes,Je="contactMethodModal",Oi={contactMethodPromptShown:{name:"contactMethodPromptShown",type:K.modalAction,context:Je,params:{aType:"shown"}},contactMethodPromptDismissed:{name:"contactMethodPromptDismissed",type:K.modalAction,context:Je,params:{aType:"dismissed"}},contactMethodPromptEmailClicked:{name:"contactMethodPromptEmailClicked",type:K.buttonClick,context:Je,params:{btn:"email"}},contactMethodPromptPhoneClicked:{name:"contactMethodPromptPhoneClicked",type:K.buttonClick,context:Je,params:{btn:"phone"}},contactMethodPromptSupportClicked:{name:"contactMethodPromptSupportClicked",type:K.buttonClick,context:Je,params:{btn:"support"}},contactMethodPromptLogoutClicked:{name:"contactMethodPromptLogoutClicked",type:K.buttonClick,context:Je,params:{btn:"logout"}}};function Ti(){return(0,M.useContext)(Ai)}function ki(e){function t(e){e||null!==m.UpsellService&&void 0!==m.UpsellService&&m.UpsellService.renderContactMethodPromptModal({origin:i.origin,section:i.section})}var n=e.translate,r=e.onHide,i=Ti().contactMethodPromptModalState,o=dn,a=pn,c=mn,l=fn,s=vn,u=yn,d=bn,p=gn,e=hn;return R().createElement("div",null,R().createElement(Le.Modal.Header,{useBaseBootstrapComponent:!0},R().createElement("div",{className:"verification-upsell-title-container"},R().createElement(Le.Modal.Title,{id:"contained-modal-title-vcenter"},n(o)))),R().createElement(Le.Modal.Body,{className:"verification-grid"},R().createElement("span",{className:"icon-spot-passcode-xl verification-grid-icon"}),R().createElement("div",null,R().createElement("div",{className:"verification-upsell-title-container page-title "},R().createElement("div",{className:"font-header-2"},n(a))),R().createElement("div",{className:"text-description"},n(c))),R().createElement("span",{className:"icon-spot-success-xl verification-grid-icon"}),R().createElement("div",null,R().createElement("div",{className:"verification-upsell-title-container page-title"},R().createElement("div",{className:"font-header-2"},n(l))),R().createElement("div",{className:"text-description"},n(s)))),R().createElement(Le.Modal.Footer,null,R().createElement("button",{type:"button",className:"btn-cta-md btn-max-width phone-number-verify-button",onClick:function(){r(),vt(Oi.contactMethodPromptPhoneClicked,{origin:i.origin,section:i.section}),null!==m.UpsellService&&void 0!==m.UpsellService&&m.UpsellService.renderPhoneUpsell({onClose:t})}},n(u)),R().createElement("button",{type:"button",className:" btn-secondary-md btn-max-width phone-number-resent-button",onClick:function(){r(),vt(Oi.contactMethodPromptEmailClicked,{origin:i.origin,section:i.section}),null!==m.UpsellService&&void 0!==m.UpsellService&&m.UpsellService.renderEmailUpsell(t)}},n(e)),R().createElement("div",null,R().createElement("div",{className:"contact-method-prompt-links"},R().createElement(Le.Link,{className:"text-default contact-method-link-button",href:"https://en.help.roblox.com/hc/articles/203313350",target:"_blank",onClick:function(){vt(Oi.contactMethodPromptSupportClicked,{origin:i.origin,section:i.section})}},n(p)),R().createElement("button",{type:"button",className:"text-default contact-method-link-button",onClick:function(){vt(Oi.contactMethodPromptLogoutClicked,{origin:i.origin,section:i.section}),m.NavigationService.logoutAndRedirect()}},n(d))))))}ki.propTypes={translate:n().func.isRequired,onHide:n().func.isRequired};var Mi=ki;function Ri(e){function t(){vt(Oi.contactMethodPromptDismissed,{origin:o.origin,section:o.section}),a({type:bi})}var n=e.translate,r=e.origin,i=e.section,e=Ti(),o=e.contactMethodPromptModalState,a=e.dispatch;return(0,M.useEffect)(function(){a({type:gi,origin:r,section:i})},[]),(0,M.useEffect)(function(){o.origin&&o.section&&vt(Oi.contactMethodPromptShown,{origin:o.origin,section:o.section})},[o.origin,o.section]),R().createElement(Le.Modal,{show:o.isOpen,onHide:t,keyboard:!1,className:"verification-modal",backdrop:"static",size:"lg","aria-labelledby":"contained-modal-title-vcenter",scrollable:"true",centered:"true"},R().createElement(Mi,{translate:n,onHide:t}))}Ri.propTypes={translate:n().func.isRequired,section:n().string.isRequired,origin:n().string.isRequired};var Ii=Ri;function Di(e){var t=e.translate,n=e.origin,e=e.section;return R().createElement(Ci,null,R().createElement(Ii,{translate:t,origin:n,section:e}))}Di.propTypes={translate:n().func.isRequired,origin:n().string.isRequired,section:n().string.isRequired};var ji=(0,o.withTranslations)(Di,s);e().UpsellService={renderEmailUpsell:function(t){(0,l.ready)(function(){var e=document.getElementById(a);e&&((0,i.unmountComponentAtNode)(e),(0,i.render)(R().createElement(Ot,null),e),nt(t))})},renderPhoneUpsell:function(e){var e=0<arguments.length&&void 0!==e?e:{},t=e.onClose,n=e.origin,r=e.existingPhoneNumber;(0,l.ready)(function(){var e=document.getElementById("phoneVerificationUpsell-container");e&&((0,i.unmountComponentAtNode)(e),(0,i.render)(R().createElement(hi,{onClose:t,origin:n,existingPhoneNumber:r}),e))})},renderContactMethodPromptModal:function(e){var t=e.origin,n=e.section;(0,l.ready)(function(){var e=document.getElementById("contactMethodPrompt-container");e&&((0,i.unmountComponentAtNode)(e),(0,i.render)(R().createElement(ji,{origin:t,section:n}),e))})}},e().EmailVerificationService={handleUserEmailUpsellAtLogout:at,handleUserEmailUpsellAtBuyRobux:function(e){return tt({origin:w,skipCallback:e})},handleUserEmailUpsellOnHomePage:nt,handleUserEmailVerificationRequiredByPurchaseWarning:function(){return tt({origin:T,requireVerification:!0})},handleUserEmailUpsellAtPremiumSubscription:function(e){return tt({origin:O,skipCallback:e})},handleUserEmailVerificationRequiredByBan:function(){return tt({origin:k,requireVerification:!0})}},(0,l.ready)(function(){document.getElementById(a)&&(0,i.render)(R().createElement(Ot,null),document.getElementById(a))})}();
//# sourceMappingURL=https://js.rbxcdn.com/14ab939d9d1760d58ab7c52a43543792-verificationUpsell.bundle.min.js.map

/* Bundle detector */
window.Roblox && window.Roblox.BundleDetector && window.Roblox.BundleDetector.bundleDetected("VerificationUpsell");